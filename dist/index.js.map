{"version":3,"sources":["webpack:///index.js","webpack:///webpack/bootstrap 7214f58df357e4b98f61","webpack:///./src/identity.js","webpack:///external \"webpack\"","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///./src/argparser/argumentMap.js","webpack:///./src/argparser/utils.js","webpack:///./src/webpacker/autoLoader.js","webpack:///./src/webpacker/index.js","webpack:///external \"colors\"","webpack:///external \"webpack-node-externals\"","webpack:///./src/argparser/parser.js","webpack:///./src/argparser/parserFromArgumentMap.js","webpack:///./src/argparser/presetMap.js","webpack:///./src/argparser/presets.js","webpack:///./src/index.js","webpack:///./src/logging.js","webpack:///./src/taskManager.js","webpack:///./src/webpacker/configBuilder.js","webpack:///./src/webpacker/modifiers.js","webpack:///./src/webpacker/subConfigBuilders.js","webpack:///external \"argparse\"","webpack:///external \"death\"","webpack:///external \"nodemon\"","webpack:///external \"read-json-sync\""],"names":["require","install","module","exports","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","compound","_ref","context","env","toLowerCase","sign","obj","arguments","length","undefined","entry","out","hot","_obj$env","derivedEnv","identity","signature","Object","defineProperty","value","Symbol","process","NODE_ENV","toUpperCase","attrHelp","argumentMap","help","watch","action","run","aliases","dest","preset","babelPreset","defaultValue","logLevel","_interopRequireDefault","__esModule","default","_parser","_parser2","clone","_typeof","copy","constructor","attr","hasOwnProperty","selectTask","taskWrapper","compilers","task","meta","flatten","arrays","concat","apply","splitByContext","args","Array","isArray","map","contexts","contextArgs","splitByEnv","envs","environments","envArgs","iterator","_objectWithoutProperties","keys","target","i","indexOf","prototype","simpleTemplate","name","data","_extends","test","RegExp","expandLoaderData","loader","loaders","expandSimpleLoaderMap","reduce","newMap","buildExpander","loaderSetMap","expandLoader","explicit","forEach","endsWith","expandExplicitLoaders","explicitLoaders","autoLoader","_ref2","_ref2$jsonPath","jsonPath","_ref2$loaderMap","loaderMap","defaultLoaderMap","_ref2$loaderSetMap","defaultLoaderSetMap","json","_readJsonSync2","dependencyPool","assign","dependencies","devDpendencies","polypacker","filter","replace","source","key","_readJsonSync","cssLoaders","html","css","less","scss","sass","woff","query","tff","svg","png","eot","jpg","common-asset","web-asset","general-asset","_configBuilder","_configBuilder2","_autoLoader2","_autoLoader3","parse","argstring","_parser$parseKnownArg","parser","parseKnownArgs","trim","split","_parser$parseKnownArg2","_slicedToArray","config","unknown","_presets2","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","next","done","push","err","TypeError","_parserFromArgumentMap","_parserFromArgumentMap2","_argumentMap","_argumentMap2","_presets","addArgumentMapToParser","argAliases","unshift","addArgument","parserFromArgumentMap","_argparse","ArgumentParser","argumentDefault","version","addHelp","description","fromSrcDir","defaultContextualComponent","handleIndexTemplate","_fs2","lstatSync","mkdir","createReadStream","__dirname","pipe","createWriteStream","NODE_COMPONENT","_utils","BROWSER_COMPONENT","FULLSTACK_COMPONENT","NODE_APPLICATION","FULLSTACK_APPLICATION","_fs","_interopRequireWildcard","newObj","metaArgs","conf","presetMap","_presetMap","logCompilation","taskManager","configBuilder","_webpacker","enumerable","get","_taskManager2","_logging","_webpacker2","_taskManager3","_argparser","_argparser2","log","str","console","pad","num","slice","shortTimestamp","d","Date","getHours","getMinutes","getSeconds","upperFirst","substr","prefix","_ref$color","color","_colors2","importantLog","_ref2$color","bold","logImportantFromToAction","acting","_ref3","_ref3$identity","_identity2","stats","_ref4","status","red","hasErrors","toString","colors","errorDetails","cyan","compiler","_colors","_identity","_asyncToGenerator","fn","gen","this","Promise","resolve","reject","step","arg","info","error","then","endWatch","watcher","close","watching","count","exit","polypack","configuration","_webpack2","polywatch","onBuild","callback","_","results","compileForAllConfigurations","configurations","waiting","rejection","setTimeout","Error","watchAllConfigurations","contextWatchActions","chain","_len","fns","_key","ref","regeneratorRuntime","mark","_callee2","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_args2","wrap","_context2","prev","t0","finish","stop","_x4","runTask","_ref5","_ref5$config","_ref5$callback","tasks","runSelectedContext","_callee","_context","_nodemon2","execMap","js","script","_path2","join","PWD","ignore","ext","on","_x2","_x3","_webpack","_path","_nodemon","_death","_death2","NODE","restart","dist","watch-and-run","signal","_defineProperty","configurable","writable","webpackConfig","_ref$env","_ref$babelPresets","babelPresets","_ref$plugins","plugins","polypackMeta","_ref$overrides","overrides","chdir","_subConfigBuilders","io","fixed","plugin","pwd","dirname","_modifiers2","_modifiers","modify","modifiers","production","_webpackNodeExternals","_webpackNodeExternals2","compound_version","externals","request","callbackLoader","mod","debug","HotModuleReplacementPlugin","whitelist","optimize","UglifyJsPlugin","_toConsumableArray","arr2","from","babelLoader","presets","exclude","noParse","DefinePlugin","$ES","CONTEXT","JSON","stringify","ENV","BannerPlugin","raw","entryOnly","DedupePlugin","OccurenceOrderPlugin","NoErrorsPlugin","BROWSER","output","libraryTarget","path","filename","basename","devtool","cache","node","__filename","fallback","moduleDirectories","extensions","resolveLoader","alias","_ref6","_module","_ref7","_ref7$packagePath","packagePath","_autoLoader"],"mappings":"AAAAA,QAAQ,sBAAsBC,UAC9BC,OAAOC,QACE,SAAUC,GCEnB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAH,OAGA,IAAAD,GAAAK,EAAAD,IACAH,WACAK,GAAAF,EACAG,QAAA,EAUA,OANAL,GAAAE,GAAAI,KAAAR,EAAAC,QAAAD,IAAAC,QAAAE,GAGAH,EAAAO,QAAA,EAGAP,EAAAC,QAvBA,GAAAI,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,GAGAR,EAAA,KDQM,SAASH,EAAQC,EAASE,GAE/BH,EAAOC,QAAUE,EAAoB,KAKhC,SAASH,EAAQC,GAEtB,YEnDD,SAASW,GAATC,GAAiC,GAAdC,GAAcD,EAAdC,QAASC,EAAKF,EAALE,GACxB,OAAQD,IAAWC,EAAOD,EAAQE,cAAgB,IAAMD,EAAIC,cAAgB,QAGzE,QAASC,KAAc,GAATC,GAASC,UAAAC,QAAA,GAAAC,SAAAF,UAAA,MAAAA,UAAA,GACpBG,EAA+CJ,EAA/CI,MAAOC,EAAwCL,EAAxCK,IAAKC,EAAmCN,EAAnCM,IAAKV,EAA8BI,EAA9BJ,QADGW,EAC2BP,EAArBH,MADNM,SAAAI,EACYC,EADZD,CAM1B,OAJAP,GAAIS,IACAC,UAAWhB,GAAUE,UAASC,QAC9BO,QAAOC,MAAKC,OAETN,EF2CVW,OAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,IAEX9B,EEpDegB,MARhB,IAAMU,GAAWK,OAAO,cAElBN,EAAaO,QAAQlB,IAAImB,UAAYD,QAAQlB,IAAImB,SAASC,eAAiB,aFsFhFlC,cEvEc0B,GF2ET,SAAS3B,EAAQC,GG5FvBD,EAAAC,QAAAH,QAAA,YHkGM,SAASE,EAAQC,GIlGvBD,EAAAC,QAAAH,QAAA,OJwGM,SAASE,EAAQC,GKxGvBD,EAAAC,QAAAH,QAAA,SL8GM,SAASE,EAAQC,GAEtB,YAEA4B,QAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,GMnHZ,IAAIK,GAAW,+GACTC,GACFf,OACIgB,KAAM,0DAEVf,KACIe,KAAM,mCAEVpC,SACIoC,KAAM,6BAEVC,OACID,KAAM,kDACNE,OAAQ,aAEZhB,KACIc,KAAM,gCACNE,OAAQ,aAEZC,KACIH,KAAM,+CAEVvB,KACI2B,SAAU,KAAM,iBAChBC,KAAM,eACNL,KAAM,sGAAwGF,EAC9GI,OAAQ,UAEZ1B,SACI4B,SAAU,MACVC,KAAM,WACNL,KAAM,iEAAmEF,EACzEI,OAAQ,UAEZI,QACIN,KAAM,yYAQVO,aACIF,KAAM,eACNG,gBACAR,KAAM,+DACNE,OAAQ,UAEZO,UACID,aAAc,QACdR,KAAM,kDNwHbrC,cMrHcoC,GNyHT,SAASrC,EAAQC,EAASE,GAE/B,YAWA,SAAS6C,GAAuB9B,GAAO,MAAOA,IAAOA,EAAI+B,WAAa/B,GAAQgC,UAAShC,GATvFW,OAAOC,eAAe7B,EAAS,cAC7B8B,OAAO,IAET9B,aAAkBoB,MAElB,IAAI8B,GAAUhD,EAAoB,IAE9BiD,EAAWJ,EAAuBG,EAItClD,cAAkBmD,cAIb,SAASpD,EAAQC,GAEtB,YOnMM,SAASoD,GAAMnC,GAClB,GAAI,MAAQA,GAAO,8BAAmBA,GAAnB,YAAAoC,EAAmBpC,IAAK,MAAOA,EAClD,IAAIqC,GAAOrC,EAAIsC,iBACf,KAAK,GAAIC,KAAQvC,GACTA,EAAIwC,eAAeD,KAAOF,EAAKE,GAAQvC,EAAIuC,GAEnD,OAAOF,GAGJ,QAASI,GAAT9C,GAAiC,GAAZ0B,GAAY1B,EAAZ0B,MAAOE,EAAK5B,EAAL4B,GAC/B,OAAGF,IAASE,EACD,gBACDF,EACC,QACAE,EACA,MAEA,OAIR,QAASmB,GAAYC,EAAWC,EAAMC,GACzC,OACID,KAAMA,GAAQ,OACdD,UAAWA,EACXE,KAAMA,IAAShB,SAAUc,EAAU,GAAGd,UAAY,UAInD,QAASiB,GAAQC,GACpB,SAAUC,OAAOC,SAAUF,GAIxB,QAASG,GAAeC,GAC3B,GAAGC,MAAMC,QAAQF,GACb,MAAOL,GAAQK,EAAKG,IAAIJ,GAE5B,IAAIK,GAAWJ,EAAKI,QAEpB,cADOJ,GAAKI,SACLA,EAAWA,EAASD,IAAI,SAAS1D,GACpC,GAAI4D,GAAcrB,EAAMgB,EAExB,OADAK,GAAY5D,QAAUA,EACf4D,KACLL,GAGH,QAASM,GAAWN,GACvB,GAAGC,MAAMC,QAAQF,GACb,MAAOL,GAAQK,EAAKG,IAAIG,GAE5B,IAAIC,GAAOP,EAAKQ,YAEhB,cADOR,GAAKQ,aACLD,EAAOA,EAAKJ,IAAI,SAASzD,GAC5B,GAAI+D,GAAUzB,EAAMgB,EAEpB,OADAS,GAAQ/D,IAAMA,EACP+D,KACLT,GP4ITxC,OAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,GAGX,IAAIuB,GAA4B,kBAAXtB,SAAoD,gBAApBA,QAAO+C,SAAwB,SAAU7D,GAAO,aAAcA,IAAS,SAAUA,GAAO,MAAOA,IAAyB,kBAAXc,SAAyBd,EAAIsC,cAAgBxB,OAAS,eAAkBd,GAE1OjB,GO3MeoD,QP4MfpD,EOnMe0D,aPoMf1D,EOxLe2D,cPyLf3D,EOjLe+D,UPkLf/D,EO7KemE,iBP8KfnE,EOjKe0E,cPkOV,SAAS3E,EAAQC,EAASE,GAE/B,YAeA,SAAS6C,GAAuB9B,GAAO,MAAOA,IAAOA,EAAI+B,WAAa/B,GAAQgC,UAAShC,GAEvF,QAAS8D,GAAyB9D,EAAK+D,GAAQ,GAAIC,KAAa,KAAK,GAAIC,KAAKjE,GAAW+D,EAAKG,QAAQD,IAAM,GAAkBtD,OAAOwD,UAAU3B,eAAelD,KAAKU,EAAKiE,KAAcD,EAAOC,GAAKjE,EAAIiE,GAAM,OAAOD,GQnSpN,QAASI,GAATzE,GAAwC,GAAf0E,GAAe1E,EAAf0E,KAASC,EAAMR,EAAAnE,GAAA,QACpC,OAAA4E,IACIC,KAAM,GAAIC,QAAJ,IAAgBJ,EAAhB,IAAwB,MAASC,GAI/C,QAASI,GAAiBJ,GACtB,MAAwB,gBAATA,IACVK,OAAQL,GACTlB,MAAMC,QAAQiB,IACTM,QAASN,GACVA,EAGL,QAASO,GAAsBvB,GAClC,MAAO3C,QAAOoD,KAAKT,GAAKwB,OAAO,SAACC,EAAQV,GACzBf,EAAIe,EAEf,OADAU,GAAOV,GAAQD,EAAAG,GAAgBF,QAASK,EAAiBpB,EAAIe,MACtDU,OAwCf,QAASC,GAAcC,GACnB,MAAO,SAASC,GAAaN,EAASO,GAIlC,MAHAF,GAAaE,GACTF,EAAaE,GAAUC,QAAQ,SAAAf,GAAA,MAAQO,GAAUM,EAAaN,EAASP,KACvEO,EAAQO,GAAYA,EAASE,SAAS,WAAa,GAAK,aAAc,EACnET,GAIf,QAASU,GAAsBC,EAAiBN,GAC5C,MAAOM,GAAgBT,OAAOE,EAAcC,OAGjC,QAASO,KAIjB,GAAAC,GAAAxF,UAAAC,QAAA,GAAAC,SAAAF,UAAA,MAAAA,UAAA,GAAAyF,EAAAD,EAHHE,WAGGxF,SAAAuF,EAHQ,iBAGRA,EAAAE,EAAAH,EAFHI,YAEG1F,SAAAyF,EAFSE,EAETF,EAAAG,EAAAN,EADHR,eACG9E,SAAA4F,EADYC,EACZD,EACCE,GAAO,EAAAC,cAAaP,GAEpBQ,EAAiBxF,OAAOyF,UAAWH,EAAKI,aAAcJ,EAAKK,eAC3DhB,EAAsBW,EAAKM,WAAaN,EAAKM,WAAW3B,WAAcK,GAC1E,OAAOtE,QAAOoD,KAAKoC,GACdK,OAAO,SAAAnC,GAAA,MAAQA,GAAKgB,SAAS,aAC7B/B,IAAI,SAAAe,GAAA,MAAQA,GAAKoC,QAAQ,WAAW,MACpCnD,IAAI,SAAAe,GAAA,MAAQwB,GAAUxB,KACtBmC,OAAO,SAAAnC,GAAA,MAAQA,KRgMvB1D,OAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,GAGX,IAAI0D,GAAW5D,OAAOyF,QAAU,SAAUpC,GAAU,IAAK,GAAIC,GAAI,EAAGA,EAAIhE,UAAUC,OAAQ+D,IAAK,CAAE,GAAIyC,GAASzG,UAAUgE,EAAI,KAAK,GAAI0C,KAAOD,GAAc/F,OAAOwD,UAAU3B,eAAelD,KAAKoH,EAAQC,KAAQ3C,EAAO2C,GAAOD,EAAOC,IAAY,MAAO3C,GAEvPjF,GQ5Qe8F,wBR6Qf9F,aQpNuByG,CAzExB,IAAAoB,GAAA3H,EAAA,IRiSKiH,EAAiBpE,EAAuB8E,GQzQvCC,GAAe,eAAgB,cAC/Bf,EAAmBnF,OAAOyF,OAC5BvB,GACIoB,KAAM,cACNa,KAAM,cACNC,OAAA/D,OAAW6D,GAAY,mBACvBG,QAAAhE,OAAW6D,GAAY,gBACvBI,QAAAjE,OAAW6D,GAAY,gBACvBK,QAAAlE,OAAW6D,GAAY,mBAEvBM,MACI3C,KAAM,qBACNG,OAAQ,aACRyC,MAAO,+CAEXC,KACI7C,KAAM,gBACNG,OAAQ,aACRyC,MAAO,kDAEXE,KACI9C,KAAM,gBACNG,OAAQ,aACRyC,MAAM,uCAEVG,KAAO/C,KAAM,SAAUG,OAAQ,aAAcyC,MAAO,iBACpDI,KAAOhD,KAAM,gBAAiBG,OAAQ,eACtC8C,KAAOjD,KAAM,SAAUG,OAAQ,iBAIjCqB,GACF0B,gBAAiB,OAAQ,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC1EC,aAAc,eAAgB,OAAQ,OAAQ,OAC9CC,iBAAkB,YAAa,OAAO,OAAQ,OAAQ,UR2UpD,SAAS9I,EAAQC,EAASE,GAE/B,YAeA,SAAS6C,GAAuB9B,GAAO,MAAOA,IAAOA,EAAI+B,WAAa/B,GAAQgC,UAAShC,GAbvFW,OAAOC,eAAe7B,EAAS,cAC7B8B,OAAO,IAET9B,EAAQyG,WAAazG,aAAkBoB,MAEvC,IAAI0H,GAAiB5I,EAAoB,IAErC6I,EAAkBhG,EAAuB+F,GAEzCE,EAAe9I,EAAoB,GAEnC+I,EAAelG,EAAuBiG,EAI1ChJ,cAAkB+I,aAClB/I,ESxZMyG,WTwZewC,cAIhB,SAASlJ,EAAQC,GU7ZvBD,EAAAC,QAAAH,QAAA,WVmaM,SAASE,EAAQC,GWnavBD,EAAAC,QAAAH,QAAA,2BXyaM,SAASE,EAAQC,EAASE,GAE/B,YAsBA,SAAS6C,GAAuB9B,GAAO,MAAOA,IAAOA,EAAI+B,WAAa/B,GAAQgC,UAAShC,GY3bzE,QAASiI,GAAMC,GAAU,GAAAC,GACZC,EAAOC,eAAeH,GAAaA,EAAUI,OAAOC,MAAM,OAD9CC,EAAAC,EAAAN,EAAA,GAC/BO,EAD+BF,EAAA,GACvBG,EADuBH,EAAA,EAEpC,QACIE,QAAQ,EAAAE,cAAYF,GACpBC,WZmaPhI,OAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,GAGX,IAAI4H,GAAiB,WAAc,QAASI,GAAcC,EAAK7E,GAAK,GAAI8E,MAAeC,GAAK,EAAUC,GAAK,EAAWC,EAAK/I,MAAW,KAAM,IAAK,GAAiCgJ,GAA7BC,EAAKN,EAAIhI,OAAO+C,cAAmBmF,GAAMG,EAAKC,EAAGC,QAAQC,QAAoBP,EAAKQ,KAAKJ,EAAGtI,QAAYoD,GAAK8E,EAAK7I,SAAW+D,GAA3D+E,GAAK,IAAoE,MAAOQ,GAAOP,GAAK,EAAMC,EAAKM,EAAO,QAAU,KAAWR,GAAMI,EAAG,WAAWA,EAAG,YAAe,QAAU,GAAIH,EAAI,KAAMC,IAAQ,MAAOH,GAAQ,MAAO,UAAUD,EAAK7E,GAAK,GAAIb,MAAMC,QAAQyF,GAAQ,MAAOA,EAAY,IAAIhI,OAAO+C,WAAYlD,QAAOmI,GAAQ,MAAOD,GAAcC,EAAK7E,EAAa,MAAM,IAAIwF,WAAU,2DAEtlB1K,cY7auBkJ,CANxB,IAAAyB,GAAAzK,EAAA,IZubK0K,EAA0B7H,EAAuB4H,GYtbtDE,EAAA3K,EAAA,GZ0bK4K,EAAgB/H,EAAuB8H,GYzb5CE,EAAA7K,EAAA,IZ6bK2J,EAAY9G,EAAuBgI,GY3blC1B,GAAS,EAAAuB,cAAAE,eZidT,SAAS/K,EAAQC,EAASE,GAE/B,YAcA,SAAS6C,GAAuB9B,GAAO,MAAOA,IAAOA,EAAI+B,WAAa/B,GAAQgC,UAAShC,GalejF,QAAS+J,GAAuB3B,EAAQjH,GAC3C,IAAK,GAAIwF,KAAOxF,GACZ,GAAIA,EAAYqB,eAAemE,GAAM,CACjC,GAAIqD,GAAa7I,EAAYwF,GAAKnF,WAClCwI,GAAWC,QAAQ,KAAOtD,GAC1ByB,EAAO8B,YAAYF,EAAY7I,EAAYwF,IAGnD,MAAOyB,GAGI,QAAS+B,GAAsBhJ,GAC1C,GAAIiH,GAAS,GAAAgC,GAAAC,gBACTC,gBAAiBnK,OACjBoK,QAAS,QACTC,SAAS,EACTC,YAAa,iEAEjB,OAAOV,GAAuB3B,EAAQjH,GboczCR,OAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,IAEX9B,EazdegL,yBb0dfhL,aa/cuBoL,CAdxB,IAAAC,GAAAnL,EAAA,IACA2K,EAAA3K,EAAA,EbkeqB6C,GAAuB8H,IA2BtC,SAAS9K,EAAQC,EAASE,GAE/B,YAiBA,SAAS6C,GAAuB9B,GAAO,MAAOA,IAAOA,EAAI+B,WAAa/B,GAAQgC,UAAShC,Gc9gBxF,QAAS0K,GAAWvH,GAGhB,MAFAA,GAAK/C,MAAQ+C,EAAK/C,OAAS,iBAC3B+C,EAAKnE,QAAUmE,EAAKnE,SAAW,QACxBmE,EAGX,QAASwH,GAA2BxH,GAIhC,MAHAA,GAAOuH,EAAWvH,GAClBA,EAAK9C,IAAM8C,EAAK9C,KAAO8C,EAAKvD,SACxB,cAAgBuD,EAAKvD,QAAQE,cAAgB,IAAMqD,EAAKtD,IAAIC,cAAgB,MACzEqD,EAGX,QAASyH,KACL,IACIC,aAAGC,UAAU,mBACf,MAAMtB,GACJqB,aAAGE,MAAM,UACTF,aAAGG,iBAAiBC,UAAY,yCAC3BC,KAAKL,aAAGM,kBAAkB,qBAIhC,QAASC,GAAejI,GAC3B,OAAO,EAAAkI,EAAA3I,cAAaiI,EAA2BxH,KAG5C,QAASmI,GAAkBnI,GAC9B,OAAO,EAAAkI,EAAA3I,cAAaiI,EAA2BxH,KAG5C,QAASoI,GAAoBpI,GAChCyH,IACAzH,EAAKI,UAAY,OAAQ,WACzBJ,EAAKQ,cAAgB,cAAe,aACpC,IAAIJ,IAAW,EAAA8H,EAAAnI,gBAAeC,GAC1BR,GAAY,EAAA0I,EAAA5H,YAAWF,GAAUD,IAAIqH,EACzC,QAAO,EAAAU,EAAA3I,aAAYC,EAAWQ,EAAK9B,MAAQ,QAAU,QAGlD,QAASmK,GAAiBrI,GAO7B,MANAA,GAAKvD,QAAU,aACRuD,GAAKI,SACZJ,EAAK9C,IAAM8C,EAAK9C,KAAO,kBACvB8C,EAAK5B,KAAM,EACX4B,EAAOwH,EAA2BxH,GAClCA,GAAO,EAAAkI,EAAA5H,YAAWN,IACX,EAAAkI,EAAA3I,aAAYS,EAAMA,EAAK9B,MAAQ,gBAAkB,OAGrD,QAASoK,GAAsBtI,GAClCA,EAAKI,UAAY,OAAQ,UACzB,IAAIA,IAAW,EAAA8H,EAAAnI,gBAAeC,EAC9B,KAAKc,EAAI,EAAGA,EAAIV,EAASrD,OAAQ+D,IAC7BV,EAASU,GAAK0G,EAA2BpH,EAASU,IAClDV,EAASU,GAAG1C,IAA+B,QAAvBgC,EAASU,GAAGrE,OAEpC,QAAO,EAAAyL,EAAA3I,aAAYa,EAAUJ,EAAK9B,MAAQ,gBAAkB,Odsc/DV,OAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,IAEX9B,Ec3eeqM,iBd4efrM,EcxeeuM,oBdyefvM,EcreewM,sBdsefxM,Ec7deyM,mBd8dfzM,Ecpde0M,uBArDhB,IAAAC,GAAAzM,EAAA,Gd6gBK4L,EAAO/I,EAAuB4J,Gc5gBnCL,EAAApM,EAAA,Id8kBM,SAASH,EAAQC,EAASE,GAE/B,YAaA,SAAS0M,GAAwB3L,GAAO,GAAIA,GAAOA,EAAI+B,WAAc,MAAO/B,EAAc,IAAI4L,KAAa,IAAW,MAAP5L,EAAe,IAAK,GAAI2G,KAAO3G,GAAWW,OAAOwD,UAAU3B,eAAelD,KAAKU,EAAK2G,KAAMiF,EAAOjF,GAAO3G,EAAI2G,GAAgC,OAAtBiF,cAAiB5L,EAAY4L,Ee3lBnQ,QAASC,GAASC,GACd,OAAQjK,SAAUiK,EAAKjK,UAGZ,QAASoB,GAAME,GAC1B,GAAIzB,GAASyB,EAAKzB,MAElB,UADOyB,GAAKzB,OACRA,GAAUqK,EAAUrK,GACpB,MAAOqK,GAAUrK,GAAQyB,EAEzB,IAAII,IAAW,EAAA8H,EAAAnI,gBAAeC,GAC1BR,GAAY,EAAA0I,EAAA5H,YAAWF,EAC3B,QAAO,EAAA8H,EAAA3I,aAAYC,GAAW,EAAA0I,EAAA5I,YAAWU,GAAO0I,EAAS1I,IfokBhExC,OAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,IAEX9B,ae/kBuBkE,CAPxB,IAAA+I,GAAA/M,EAAA,IAAY8M,Ef0lBKJ,EAAwBK,GezlBzCX,EAAApM,EAAA,IfinBM,SAASH,EAAQC,EAASE,GAE/B,YA0CA,SAAS6C,GAAuB9B,GAAO,MAAOA,IAAOA,EAAI+B,WAAa/B,GAAQgC,UAAShC,GAxCvFW,OAAOC,eAAe7B,EAAS,cAC7B8B,OAAO,IAET9B,EAAQkN,eAAiBlN,EAAQqJ,OAASrJ,EAAQwC,IAAMxC,EAAQmN,YAAcnN,EAAQyG,WAAazG,EAAQoN,cAAgBhM,MAE3H,IAAIiM,GAAanN,EAAoB,EAErC0B,QAAOC,eAAe7B,EAAS,cAC7BsN,YAAY,EACZC,IAAK,WACH,MAAOF,GgBhoBY5G,ahBooBvB,IAAI+G,GAAgBtN,EAAoB,GAExC0B,QAAOC,eAAe7B,EAAS,OAC7BsN,YAAY,EACZC,IAAK,WACH,MAAOC,GgBxoBUhL,MhB4oBrB,IAAIiL,GAAWvN,EAAoB,GAEnC0B,QAAOC,eAAe7B,EAAS,kBAC7BsN,YAAY,EACZC,IAAK,WACH,MAAOE,GgB/oBHP,iBhBmpBR,IAAIQ,GAAc3K,EAAuBsK,GAErCM,EAAgB5K,EAAuByK,GAEvCI,EAAa1N,EAAoB,GAEjC2N,EAAc9K,EAAuB6K,EAIzC5N,GgBhqBMoN,chBgqBkBM,aACxB1N,EgBhqBMmN,YhBgqBgBQ,aACtB3N,EgBhqBMqJ,OhBgqBWwE,cAIZ,SAAS9N,EAAQC,EAASE,GAE/B,YAqBA,SAAS6C,GAAuB9B,GAAO,MAAOA,IAAOA,EAAI+B,WAAa/B,GAAQgC,UAAShC,GiB1rBjF,QAAS6M,GAAIC,GAChBC,QAAQF,IAAIC,GAGT,QAASE,GAAIC,GAChB,OAAQ,IAAIA,GAAKC,MAAM,IAGpB,QAASC,KACZ,GAAIC,GAAI,GAAIC,KACZ,OAAOL,GAAII,EAAEE,YAAc,IAAMN,EAAII,EAAEG,cAAgB,IAAMP,EAAII,EAAEI,cAGvE,QAASC,GAAYX,GACjB,MAAoB,mBAANA,IAAsBA,GAAO,GAAIA,EAAI,GAAG7L,cAAgB6L,EAAIY,OAAO,IAAM,GAGpF,QAASC,KAAgC,GAAAhO,GAAAM,UAAAC,QAAA,GAAAC,SAAAF,UAAA,MAAAA,UAAA,GAAA2N,EAAAjO,EAAxBkO,QAAwB1N,SAAAyN,EAAhB,UAAgBA,CAC5C,OAAOE,cAAOD,GAAO,IAAMV,IAAmB,MAAQW,aAAA,KAAYL,EAAWI,IAAU,KAGpF,QAASE,GAAajB,GAA8B,GAAArH,GAAAxF,UAAAC,QAAA,GAAAC,SAAAF,UAAA,MAAAA,UAAA,GAAA+N,EAAAvI,EAAxBoI,QAAwB1N,SAAA6N,EAAhB,UAAgBA,CACzDnB,GAAKc,GAAQE,UAAU,IAAMC,aAAOG,KAAKnB,IAGpC,QAASoB,GAAyBC,EAAlCC,GAAmF,GAAAC,GAAAD,EAAAE,cAA3BlO,EAA2BiO,EAA3BjO,MAAOC,EAAoBgO,EAApBhO,IAAOwN,EAAa5N,UAAAC,QAAA,GAAAC,SAAAF,UAAA,GAAP,OAAOA,UAAA,EACtF8N,GAAgBI,EAAhB,UAAgCL,aAAOD,GAAOzN,GAA9C,SAA6D0N,aAAOD,GAAOxN,GAA3E,KAGG,QAAS4L,GAAezC,EAAK+E,EAA7BC,GAA2D,GAAtB3M,GAAsB2M,EAAtB3M,SAAUnB,EAAY8N,EAAZ9N,UAC9C+N,EAAS,SAeb,OAdGjF,IACDuE,EAAaD,aAAOY,IAAP,yBAAoChO,EAApC,MAAoDmN,MAAO,QACxEhB,EAAI,QAASrD,GACbiF,EAAS,SACDF,EAAMI,aACdZ,EAAaD,aAAOY,IAAP,yBAAoChO,EAApC,MAAoDmN,MAAO,QACxEhB,EAAI0B,EAAMK,UAAUC,QAAQ,EAAMC,cAAc,KAChDL,EAAS,SAEPV,EAAa,sBAAwBD,aAAOiB,KAAKrO,IAEtC,WAAZmB,GACDgL,EAAI0B,EAAMK,UAAUC,QAAQ,MAG1BG,SAAUtO,EACV+N,UjBwnBP9N,OAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,IAEX9B,EiB1qBe8N,MjB2qBf9N,EiBvqBeiO,MjBwqBfjO,EiBpqBeoO,iBjBqqBfpO,EiB5pBe4O,SjB6pBf5O,EiBzpBegP,ejB0pBfhP,EiBtpBemP,2BjBupBfnP,EiBnpBekN,gBAhChB,IAAAgD,GAAAhQ,EAAA,IjBurBK6O,EAAWhM,EAAuBmN,GiBtrBvCC,EAAAjQ,EAAA,GjB0rBKqP,EAAaxM,EAAuBoN,IA2EnC,SAASpQ,EAAQC,EAASE,GAE/B,YAiFA,SAAS6C,GAAuB9B,GAAO,MAAOA,IAAOA,EAAI+B,WAAa/B,GAAQgC,UAAShC,GAEvF,QAASmP,GAAkBC,GAAM,MAAO,YAAc,GAAIC,GAAMD,EAAGnM,MAAMqM,KAAMrP,UAAY,OAAO,IAAIsP,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAK/I,EAAKgJ,GAAO,IAAM,GAAIC,GAAOP,EAAI1I,GAAKgJ,GAAU9O,EAAQ+O,EAAK/O,MAAS,MAAOgP,GAAwB,WAAfJ,GAAOI,GAAkB,MAAID,GAAKtG,SAAQkG,GAAQ3O,GAAwB0O,QAAQC,QAAQ3O,GAAOiP,KAAK,SAAUjP,GAAS,MAAO6O,GAAK,OAAQ7O,IAAW,SAAU2I,GAAO,MAAOkG,GAAK,QAASlG,KAAc,MAAOkG,GAAK,WkBx0Bxc,QAASK,GAASC,GACdA,EAAQC,MAAM,YACV,EAAAzD,EAAA0B,0BAAyB,oBAAqB8B,EAAS,WACvDE,EAASC,OAAS,EACdD,EAASC,SACT,EAAA3D,EAAAuB,cAAa,mDACbhN,QAAQqP,KAAK,MAKzB,QAASC,GAASC,GACd,GAAItB,IAAW,EAAAuB,eAAQ,EAAA9D,cAAc6D,GASrC,OARAtB,GAAAV,cAAqBgC,EAAAhC,cACrBU,EAASwB,GAAa,WAClB,GAAIR,GAAUhB,EAAS3N,MAAT4B,MAAA+L,EAAA/O,UAId,OAHAiQ,GAASC,OAAS,EAClBH,EAAA1B,cAAoBgC,EAAAhC,cACpB4B,EAASvN,UAAU4G,KAAKyG,GACjBA,GAEJhB,EAGX,QAASyB,GAAQjH,EAAK+E,EAAtB5O,GAAkE,GAApCkC,GAAoClC,EAApCkC,SAAuBnB,EAAaf,EAAA2O,cAAb5N,SACjD,QAAO,EAAA8L,EAAAP,gBAAezC,EAAK+E,GAAQ1M,WAAUnB,cAG1C,QAASa,GAAI+O,GAA6B,GAAdI,GAAczQ,UAAAC,QAAA,GAAAC,SAAAF,UAAA,GAAL,SAAA0Q,GAAA,MAAGA,IAAE1Q,UAAA,EAC7CoQ,GAASC,GAAe/O,IAAI,SAACiI,EAAK+E,GAC9BqC,QAAQN,EAAAhC,cAAwB5N,WAAa+P,EAAQjH,EAAK+E,EAAO+B,GACjEI,GAAUE,oBAIlB,QAASC,GAA4BC,GACjC,GAAIC,GAAUD,EAAe5Q,OACzB0Q,KACAI,EAAY,IAChB,OAAO,IAAIzB,SAAQ,SAACC,EAASC,GACzBqB,EAAexN,IAAI,SAAAgN,IACf,EAAA9D,EAAA0B,0BAAyB,eAAgBoC,GACzCD,EAASC,GAAe/O,IAAI,SAACiI,EAAK+E,GAC9BqC,EAAQN,EAAAhC,cAAwB5N,WAAa+P,EAAQjH,EAAK+E,EAAO+B,GACjES,GAAW,EACPA,GACAvB,EAAQoB,OAIhBI,IACAA,EAAYC,WAAW,SAAAN,GAChBI,GACCtB,EAAO,GAAIyB,OAAJ,uCAAiDN,KAC7D,QASf,QAASO,GAAuBL,GAC5B,GAAIC,GAAUD,EAAe5Q,OACzB0Q,IACJ,OAAO,IAAIrB,SAAQ,SAACC,EAASC,GACzBqB,EAAexN,IAAI,SAAAgN,IACf,EAAA9D,EAAA0B,0BAAyB,4BAA6BoC,GACtDD,EAASC,GAAeE,GAAW,IAAK,SAAChH,EAAK+E,GAC1CqC,EAAQN,EAAAhC,cAAwB5N,WAAa+P,EAAQjH,EAAK+E,EAAO+B,GAC9Dc,EAAoBd,EAAc1Q,UACjCwR,EAAoBd,EAAc1Q,SAAS0Q,GAE/CS,GAAW,EACPA,GACAvB,EAAQoB,OAIpBK,WAAW,WACJF,GACCtB,EAAO,GAAIyB,OAAJ,uCAAiDN,KAC7D,OAwBX,QAASS,KAAa,OAAAC,GAAArR,UAAAC,OAAJqR,EAAInO,MAAAkO,GAAAE,EAAA,EAAAF,EAAAE,MAAJD,EAAIC,GAAAvR,UAAAuR,EAClB,sBAAAC,GAAAtC,EAAAuC,mBAAAC,KAAO,QAAAC,KAAA,GAAAC,GAAAC,EAAAC,EAAAC,EAAAC,EACM7C,EADN8C,EAAAjS,SAAA,OAAAyR,oBAAAS,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA/I,MAAA,OAAAwI,GAAA,EAAAC,GAAA,EAAAC,EAAA5R,OAAAiS,EAAAC,KAAA,EAAAL,EACYT,EADZzQ,OAAA+C,WAAA,WAAAgO,GAAAI,EAAAD,EAAA3I,QAAAC,KAAA,CAAA8I,EAAA/I,KAAA,eACM+F,GADN6C,EAAApR,MAAAuR,EAAA/I,KAAA,EAEO+F,EAAAnM,MAAA9C,OAAA+R,EAFP,QAAAL,GAAA,EAAAO,EAAA/I,KAAA,gBAAA+I,EAAA/I,KAAA,iBAAA+I,EAAAC,KAAA,GAAAD,EAAAE,GAAAF,EAAA,YAAAN,GAAA,EAAAC,EAAAK,EAAAE,EAAA,SAAAF,EAAAC,KAAA,GAAAD,EAAAC,KAAA,IAAAR,GAAAG,0BAAA,YAAAI,EAAAC,KAAA,IAAAP,EAAA,CAAAM,EAAA/I,KAAA,cAAA0I,EAAA,eAAAK,GAAAG,OAAA,kBAAAH,GAAAG,OAAA,4BAAAH,GAAAI,SAAAZ,EAAAtC,OAAA,4BAAP,iBAAAmD,GAAA,MAAAhB,GAAAxO,MAAAqM,KAAArP,eAcJ,QAASmQ,KAAgB,GAAA5B,GAAAvO,UAAAC,QAAA,GAAAC,SAAAF,UAAA,MAAAA,UAAA,GAAVuJ,EAAUgF,EAAVhF,GACX,IAAGA,EAEC,KADAuD,SAAQF,IAAIrD,GACNA,CAEP0G,GAASC,QACR,EAAA3D,EAAAK,KAAI,OACJ,EAAAL,EAAAuB,cAAa,sBACbmC,EAASvN,UAAUW,IAAIyM,MAEvB,EAAAvD,EAAAuB,cAAa,8BACbhN,QAAQqP,KAAK,IAIN,QAASsC,GAATC,GAAuE,GAAAC,GAAAD,EAArDjK,OAAS/F,EAA4CiQ,EAA5CjQ,UAAWC,EAAiCgQ,EAAjChQ,KAAO+F,EAA0BgK,EAA1BhK,QAA0BkK,EAAAF,EAAjBjC,WAAiBvQ,SAAA0S,EAAN,SAAAlC,GAAA,MAAGA,IAAGkC,CAClF,OAAOC,GAAMlQ,GAAMD,EAAUW,IAAV4L,EAAAnP,OAAsB4I,YAAUmH,KAAKY,GAAjDoC,SAAiE,SAAAtJ,GAAA,MAAO4G,IAAM5G,UlB6mBxF7I,OAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,GAGX,IAAIkS,GAAqB,WACrB,GAAItB,GAAMtC,EAAkBuC,mBAAmBC,KkBrqBpD,QAAAqB,GAAkClC,EAAlC1C,GAAA,GAAmDzF,GAAnDyF,EAAmDzF,OAAnD,OAAA+I,oBAAAS,KAAA,SAAAc,GAAA,cAAAA,EAAAZ,KAAAY,EAAA5J,MAAA,OACEyH,EAAexN,IAAI,SAAAgN,GACZA,EAAc/O,OACb,EAAAiL,EAAAuB,cAAa,YAAcD,aAAOiB,KAAKuB,EAAc1Q,SAAW,iBAAoBkO,aAAOiB,KAAKuB,EAAcjQ,OAC9G,EAAA6S,eACIC,SAAWC,GAAI,QACfC,OAAQC,aAAKC,KAAKxS,QAAQlB,IAAI2T,IAAKlD,EAAcjQ,KACjD8C,KAAMwF,EACN8K,QAAS,KACTpS,OAAQ,YACRqS,IAAK,SACNC,GAAG,UAAW,YACb,EAAAnH,EAAAuB,cAAa,cACd4F,GAAG,OAAQ,YACV,EAAAnH,EAAAuB,cAAaD,aAAOiB,KAAKuB,EAAc1Q,SAAW,qBAdhE,wBAAAqT,GAAAT,SAAAQ,EAAA1D,QlBqsBK,OAAO,UAA4BsE,EAAKC,GACpC,MAAOpC,GAAIxO,MAAMqM,KAAMrP,cAI/BlB,GkBrwBewC,MlBswBfxC,akBzpBuB2T,CA5JxB,IAAAzD,GAAAhQ,EAAA,IlByzBK6O,EAAWhM,EAAuBmN,GkBxzBvC6E,EAAA7U,EAAA,GlB4zBKsR,EAAYzO,EAAuBgS,GkB3zBxCC,EAAA9U,EAAA,GlB+zBKqU,EAASxR,EAAuBiS,GkB9zBrCC,EAAA/U,EAAA,IlBk0BKiU,EAAYpR,EAAuBkS,GkBj0BxCC,EAAAhV,EAAA,IlBq0BKiV,EAAUpS,EAAuBmS,GkBn0BtC7H,EAAAnN,EAAA,GlBu0BKwN,EAAc3K,EAAuBsK,GkBt0B1CO,EAAA1N,EAAA,GACAiQ,GlBy0BmBpN,EAAuB6K,GkBz0B1C1N,EAAA,IlB60BKqP,EAAaxM,EAAuBoN,GkB30BzC1C,EAAAvN,EAAA,IAEIiR,GACAC,MAAO,EACPxN,cAGE6N,EAAY1P,OAAO0P,GA6DrBY,GACA+C,KAAM,SAAA1O,GAAA,GAAEpE,GAAFoE,EAAEpE,MAAOE,EAATkE,EAASlE,GAAT,OAAkBF,IAASE,GAAO2R,aAAQkB,YAuD9CtB,GACFuB,KAAQhD,EAAMR,EAA6BT,GAC3C/O,MAAS8P,EACT5P,IAAO8P,EAAMR,EAA6BkC,GAC1CuB,gBAAiBjD,EAAMF,EAAwB4B,KAsBnD,EAAAmB,cAAS,SAACK,EAAQ/K,GAAT,MAAiB4G,IAAM5G,WlB26B1B,SAAS1K,EAAQC,EAASE,GAE/B,YA6BA,SAAS6C,GAAuB9B,GAAO,MAAOA,IAAOA,EAAI+B,WAAa/B,GAAQgC,UAAShC,GAEvF,QAASwU,GAAgBxU,EAAK2G,EAAK9F,GAAiK,MAApJ8F,KAAO3G,GAAOW,OAAOC,eAAeZ,EAAK2G,GAAO9F,MAAOA,EAAOwL,YAAY,EAAMoI,cAAc,EAAMC,UAAU,IAAkB1U,EAAI2G,GAAO9F,EAAgBb,EmBnmC7L,QAAS2U,GAAThV,GAOb,GANES,GAMFT,EANES,MAAOC,EAMTV,EANSU,IAAKC,EAMdX,EANcW,IAAKtB,EAMnBW,EANmBX,QAASY,EAM5BD,EAN4BC,QAM5BgV,EAAAjV,EALEE,MAKFM,SAAAyU,EALMpU,EAKNoU,EAAAC,EAAAlV,EAJEmV,eAIF3U,SAAA0U,OAAAE,EAAApV,EAHEqV,UAGF7U,SAAA4U,OAFcE,EAEdtV,EAAA2O,cAAA4G,EAAAvV,EADEwV,YACFhV,SAAA+U,MACEnU,SAAQqU,MAAMrU,QAAQlB,IAAI2T,IAC1B,IAAI9K,GAAS/H,OAAOyF,OAChB6O,EAAAT,KAAAlG,aAA4B2G,IAAgB,EAAA/F,EAAAnP,OAAMK,QAAOC,MAAKC,MAAKV,UAASC,SAC5E,EAAAwV,EAAAC,KAAIlV,QAAOC,SACX,EAAAgV,EAAArR,SAAQpE,aACR,EAAAyV,EAAAE,UACA,EAAAF,EAAAG,SAAQ3V,MAAKD,UAASoV,aACtB,EAAAK,EAAA7F,UAASiG,IAAK,KAAMzW,UAAS0W,QAASpC,aAAKC,KAAKtI,UAAW,SAC3D,EAAAoK,EAAAvW,SAAQgW,iBACRK,EAEJ,QAAO,EAAAQ,eAAQjN,SAAQ7I,MAAKS,QnBmjC/BK,OAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,IAEX9B,amBzkCuB4V,CATxB,IAAAjJ,GAAAzM,EAAA,GACA8U,GnBqlCYjS,EAAuB4J,GmBrlCnCzM,EAAA,InBylCKqU,EAASxR,EAAuBiS,GmBxlCrCD,EAAA7U,EAAA,GACA2W,GnB2lCiB9T,EAAuBgS,GmB3lCxC7U,EAAA,KnB+lCK0W,EAAc7T,EAAuB8T,GmB9lC1C1G,EAAAjQ,EAAA,GnBkmCKqP,EAAaxM,EAAuBoN,GmBjmCzCmG,EAAApW,EAAA,IAEMuB,EAAaO,QAAQlB,IAAImB,UAAYD,QAAQlB,IAAImB,SAASC,eAAiB,enBgoC3E,SAASnC,EAAQC,EAASE,GAE/B,YAmBA,SAAS6C,GAAuB9B,GAAO,MAAOA,IAAOA,EAAI+B,WAAa/B,GAAQgC,UAAShC,GoBxnCzE,QAAS6V,GAATlW,GAAmC,GAAlB+I,GAAkB/I,EAAlB+I,OAAQ7I,EAAUF,EAAVE,IAAKS,EAAKX,EAALW,GAMzC,OALAoI,GAASoN,EAAUzF,SAAS3H,GACJ,cAArB7I,EAAIC,gBACH4I,EAASoN,EAAUC,WAAWrN,IAC/BpI,IACCoI,EAASoN,EAAUxV,IAAIoI,IACpBA,EpBimCV/H,OAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,IAEX9B,aoB1mCuB8W,CApCxB,IAAAG,GAAA/W,EAAA,IpBkpCKgX,EAAyBnU,EAAuBkU,GoBjpCrDlC,EAAA7U,EAAA,GpBqpCKsR,EAAYzO,EAAuBgS,GoBnpCxC5E,EAAAjQ,EAAA,GpBupCKqP,EAAaxM,EAAuBoN,GoBrpCnC4G,GACFzF,SAAU,SAAA3H,GACN,GAAIwN,GAAmBxN,EAAA4F,cAA2B5N,SAclD,OAbAgI,GAAOyN,UAAU5M,KACb,SAAC3J,EAASwW,EAAS1F,GACf,MAAG,aAAalM,KAAK4R,GACV1F,EAAS,KAAS0F,EAAQ1I,OAAO,GAAjC,aAAgDwI,OAE3DxF,OAGRhI,EAAO2N,gBACHhG,SAAU,SAACiG,GAAD,MAASA,GAAA,YACHA,EADG,aACaJ,EADb,4CAEGA,EAFH,4BAIhBxN,GAEXpI,IAAK,SAAAoI,GAKD,MAJAA,GAAO6N,OAAQ,EACf7N,EAAOsM,QAAQ/K,QAAQ,GAAIsG,cAAQiG,4BACnC9N,EAAOyN,YAAa,EAAAF,eAAgBQ,WAAY,4BAChD/N,EAAOtI,MAAM6J,QAAQ,yBACdvB,GAEXqN,WAAY,SAAArN,GAER,MADAA,GAAOsM,QAAQzL,KAAM,GAAIgH,cAAQmG,SAASC,gBACnCjO,KpBwqCT,SAAS5J,EAAQC,EAASE,GAE/B,YAqCA,SAAS6C,GAAuB9B,GAAO,MAAOA,IAAOA,EAAI+B,WAAa/B,GAAQgC,UAAShC,GAEvF,QAAS4W,GAAmB9N,GAAO,GAAI1F,MAAMC,QAAQyF,GAAM,CAAE,IAAK,GAAI7E,GAAI,EAAG4S,EAAOzT,MAAM0F,EAAI5I,QAAS+D,EAAI6E,EAAI5I,OAAQ+D,IAAO4S,EAAK5S,GAAK6E,EAAI7E,EAAM,OAAO4S,GAAe,MAAOzT,OAAM0T,KAAKhO,GqB3uC3L,QAASiO,GAATpX,GAAoC,GAAdmV,GAAcnV,EAAdmV,YAGlB,OAFAA,GAAa7K,QAAQ,UACrB6K,EAAavL,KAAK,YAEd/E,KAAM,cACNG,OAAQ,QACRyC,OACI4P,QAASlC,EAAaxR,IAAI,SAAA5B,GAAA,sBAA0BA,KAExDuV,QAAS,eACTC,QAAS,aAIV,QAAS1B,GAAT/P,GAAwC,GAAvB5F,GAAuB4F,EAAvB5F,IAAKD,EAAkB6F,EAAlB7F,QAASoV,EAASvP,EAATuP,OAClC,QACIA,SACA,GAAIzE,cAAQ4G,cACRC,KACIC,QAASC,KAAKC,UAAU3X,GAAW,QACnC4X,IAAKF,KAAKC,UAAU1X,MAG5B,GAAI0Q,cAAQkH,aACR,4CACEC,KAAK,EAAMC,WAAW,KAT5B3U,OAAA4T,EAWG5B,IACH,GAAIzE,cAAQmG,SAASkB,aACrB,GAAIrH,cAAQmG,SAASmB,qBACrB,GAAItH,cAAQuH,kBAIb,QAAS9T,GAAToK,GAA0B,GAATxO,GAASwO,EAATxO,OACpB,QACIoE,QACImQ,KAAM,OACN4D,QAAS,OACVnY,IAIJ,QAASoY,GAAO3X,GACnB,OACI4X,cAAe,YACfC,KAAM5E,aAAKoC,QAAQrV,GACnB8X,SAAU7E,aAAK8E,SAAS/X,IAIzB,QAASkV,KACZ,OACI8C,QAAS,aACTC,OAAO,EACPC,MACItN,WAAW,EACXuN,YAAY,GAEhBrC,YAAa,EAAAF,kBAId,QAASzG,GAAThB,GAA0C,GAAxBiH,GAAwBjH,EAAxBiH,IAAKzW,EAAmBwP,EAAnBxP,QAAS0W,EAAUlH,EAAVkH,QAC/B+C,GACAnF,aAAKC,KAAKmC,EAAS,gBACnBpC,aAAKC,KAAKD,aAAK9D,QAAQiG,GAAM,gBAC7BnC,aAAKC,KAAKD,aAAK9D,QAAQiG,GAAM,wCAEjC,QACI7V,QAAS0T,aAAK9D,QAAQiG,GACtBjG,SACIkJ,mBAAoB1Z,EAAS,eAAgB,wCAC7C2Z,YAAa,GAAI,QAAS,MAAO,QACjCF,YAEJG,eACIF,mBAAoB,eAAgB,wCACpCD,WACAI,OAASxI,SAAU,uBAKxB,QAAS2H,GAATrF,GAAsB,GAALtS,GAAKsS,EAALtS,GACpB,QACI2X,QACIC,cAAe,YACfC,KAAM5E,aAAKoC,QAAQrV,GACnB8X,SAAU7E,aAAK8E,SAAS/X,KAK7B,QAASiV,GAATwD,GAAyB,GAAZ1Y,GAAY0Y,EAAZ1Y,MAAOC,EAAKyY,EAALzY,GACvB,OAAAkE,IAAQnE,OAASA,IAAY4X,GAAQ3X,SAGlC,QAAS0Y,GAATC,GAA+D,GAA9ClE,GAA8CkE,EAA9ClE,aAA8CmE,EAAAD,EAAhCE,cAAgC/Y,SAAA8Y,EAAlB,iBAAkBA,CAClE,QACIna,QACI8F,SACImS,GAAajC,kBADjB9R,OAAA4T,GAEO,EAAA7O,eAAYpC,SAAU2N,aAAK9D,QAAQ0J,SrB+lCrDvY,OAAOC,eAAe7B,EAAS,cAC3B8B,OAAO,IAEX9B,EAAQD,OAASqB,MAEjB,IAAIoE,GAAW5D,OAAOyF,QAAU,SAAUpC,GAAU,IAAK,GAAIC,GAAI,EAAGA,EAAIhE,UAAUC,OAAQ+D,IAAK,CAAE,GAAIyC,GAASzG,UAAUgE,EAAI,KAAK,GAAI0C,KAAOD,GAAc/F,OAAOwD,UAAU3B,eAAelD,KAAKoH,EAAQC,KAAQ3C,EAAO2C,GAAOD,EAAOC,IAAY,MAAO3C,GAEvPjF,GqB/rCeyW,SrBgsCfzW,EqB5qCeiF,SrB6qCfjF,EqBpqCeiZ,SrBqqCfjZ,EqB7pCewW,QrB8pCfxW,EqBlpCeyQ,UrBmpCfzQ,EqB9nCeiZ,SrB+nCfjZ,EqBrnCeuW,IApGhB,IAAA5J,GAAAzM,EAAA,GACA8U,GrB4tCYjS,EAAuB4J,GqB5tCnCzM,EAAA,IrBguCKqU,EAASxR,EAAuBiS,GqB/tCrCD,EAAA7U,EAAA,GrBmuCKsR,EAAYzO,EAAuBgS,GqBluCxCkC,EAAA/W,EAAA,IrBsuCKgX,EAAyBnU,EAAuBkU,GqBruCrDmD,EAAAla,EAAA,GrByuCK8I,EAAejG,EAAuBqX,EAwH1Cpa,GAAQD,OAASia,GAIZ,SAASja,EAAQC,GsBz2CvBD,EAAAC,QAAAH,QAAA,atB+2CM,SAASE,EAAQC,GuB/2CvBD,EAAAC,QAAAH,QAAA,UvBq3CM,SAASE,EAAQC,GwBr3CvBD,EAAAC,QAAAH,QAAA,YxB23CM,SAASE,EAAQC,GyB33CvBD,EAAAC,QAAAH,QAAA","file":"index.js","sourcesContent":["require(\"source-map-support\").install();\nmodule.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(16);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.sign = sign;\n\tvar identity = Symbol('polypacker');\n\t\n\tvar derivedEnv = process.env.NODE_ENV && process.env.NODE_ENV.toUpperCase() || 'DEVELOPMENT';\n\t\n\tfunction compound(_ref) {\n\t    var context = _ref.context;\n\t    var env = _ref.env;\n\t\n\t    return context && env ? context.toLowerCase() + '_' + env.toLowerCase() : 'index';\n\t}\n\t\n\tfunction sign() {\n\t    var obj = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t    var entry = obj.entry;\n\t    var out = obj.out;\n\t    var hot = obj.hot;\n\t    var context = obj.context;\n\t    var _obj$env = obj.env;\n\t    var env = _obj$env === undefined ? derivedEnv : _obj$env;\n\t\n\t    obj[identity] = {\n\t        signature: compound({ context: context, env: env }),\n\t        entry: entry, out: out, hot: hot\n\t    };\n\t    return obj;\n\t}\n\t\n\texports.default = identity;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"webpack\");\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fs\");\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"path\");\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tvar attrHelp = 'There can be multiple (each a seperate argument), and they will contribute to the cross product of compilers';\n\tvar argumentMap = {\n\t    entry: {\n\t        help: 'main entry point for your program, across all contexts'\n\t    },\n\t    out: {\n\t        help: 'destination for compiled bundle'\n\t    },\n\t    modules: {\n\t        help: 'where to look for modules'\n\t    },\n\t    watch: {\n\t        help: 'monitor source files for changes and recompile.',\n\t        action: 'storeTrue'\n\t    },\n\t    hot: {\n\t        help: 'enable hot module replacement',\n\t        action: 'storeTrue'\n\t    },\n\t    run: {\n\t        help: 'Which context to run on compilation, if any'\n\t    },\n\t    env: {\n\t        aliases: ['-e', '--environment'],\n\t        dest: 'environments',\n\t        help: 'an application lifecycle environment {DEVELOPMENT, PRODUCTION, etc} this distribution will run in. ' + attrHelp,\n\t        action: 'append'\n\t    },\n\t    context: {\n\t        aliases: ['-c'],\n\t        dest: 'contexts',\n\t        help: 'a context {NODE, BROWSER, etc} this distribution will run in. ' + attrHelp,\n\t        action: 'append'\n\t    },\n\t    preset: {\n\t        help: '\\\n\t            reference to a preset build configuration. For instance, FULLSTACK_COMPONENT references {\\\n\t            entry: ./src/entry.js\\\n\t            contexts: [NODE, BROWSER]\\\n\t            environments: [DEVELOPMENT, PRODUCTION]\\\n\t            out: ./dist/for/$context_$env.js\\\n\t        }. Presets are actually functions that take in the given user args, and thus can have fairly intricate logic.'\n\t    },\n\t    babelPreset: {\n\t        dest: 'babelPresets',\n\t        defaultValue: [],\n\t        help: 'add a preset to the babel loader, between es2015 and stage-0',\n\t        action: 'append'\n\t    },\n\t    logLevel: {\n\t        defaultValue: 'ERROR',\n\t        help: 'VERBOSE will output webpack stats and warnings'\n\t    }\n\t};\n\texports.default = argumentMap;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = undefined;\n\t\n\tvar _parser = __webpack_require__(12);\n\t\n\tvar _parser2 = _interopRequireDefault(_parser);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = _parser2.default;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\texports.clone = clone;\n\texports.selectTask = selectTask;\n\texports.taskWrapper = taskWrapper;\n\texports.flatten = flatten;\n\texports.splitByContext = splitByContext;\n\texports.splitByEnv = splitByEnv;\n\tfunction clone(obj) {\n\t    if (null == obj || \"object\" != (typeof obj === 'undefined' ? 'undefined' : _typeof(obj))) return obj;\n\t    var copy = obj.constructor() || {};\n\t    for (var attr in obj) {\n\t        if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];\n\t    }\n\t    return copy;\n\t}\n\t\n\tfunction selectTask(_ref) {\n\t    var watch = _ref.watch;\n\t    var run = _ref.run;\n\t\n\t    if (watch && run) {\n\t        return 'watch-and-run';\n\t    } else if (watch) {\n\t        return 'watch';\n\t    } else if (run) {\n\t        return 'run';\n\t    } else {\n\t        return 'dist';\n\t    }\n\t}\n\t\n\tfunction taskWrapper(compilers, task, meta) {\n\t    return {\n\t        task: task || 'dist',\n\t        compilers: compilers,\n\t        meta: meta || { logLevel: compilers[0].logLevel || 'ERROR' }\n\t    };\n\t}\n\t\n\tfunction flatten(arrays) {\n\t    return [].concat.apply([], arrays);\n\t}\n\t\n\tfunction splitByContext(args) {\n\t    if (Array.isArray(args)) {\n\t        return flatten(args.map(splitByContext));\n\t    }\n\t    var contexts = args.contexts;\n\t    delete args.contexts;\n\t    return contexts ? contexts.map(function (context) {\n\t        var contextArgs = clone(args);\n\t        contextArgs.context = context;\n\t        return contextArgs;\n\t    }) : [args];\n\t}\n\t\n\tfunction splitByEnv(args) {\n\t    if (Array.isArray(args)) {\n\t        return flatten(args.map(splitByEnv));\n\t    }\n\t    var envs = args.environments;\n\t    delete args.environments;\n\t    return envs ? envs.map(function (env) {\n\t        var envArgs = clone(args);\n\t        envArgs.env = env;\n\t        return envArgs;\n\t    }) : [args];\n\t}\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.expandSimpleLoaderMap = expandSimpleLoaderMap;\n\texports.default = autoLoader;\n\t\n\tvar _readJsonSync = __webpack_require__(25);\n\t\n\tvar _readJsonSync2 = _interopRequireDefault(_readJsonSync);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\t\n\tfunction simpleTemplate(_ref) {\n\t    var name = _ref.name;\n\t\n\t    var data = _objectWithoutProperties(_ref, ['name']);\n\t\n\t    return _extends({\n\t        test: new RegExp('.' + name + '$', 'g') }, data);\n\t}\n\t\n\tfunction expandLoaderData(data) {\n\t    return typeof data == 'string' ? { loader: data } : Array.isArray(data) ? { loaders: data } : data;\n\t}\n\t\n\tfunction expandSimpleLoaderMap(map) {\n\t    return Object.keys(map).reduce(function (newMap, name) {\n\t        var data = map[name];\n\t        newMap[name] = simpleTemplate(_extends({ name: name }, expandLoaderData(map[name])));\n\t        return newMap;\n\t    }, {});\n\t}\n\t\n\tvar cssLoaders = ['style-loader', 'css-loader'];\n\tvar defaultLoaderMap = Object.assign(expandSimpleLoaderMap({\n\t    json: 'json-loader',\n\t    html: 'html-loader',\n\t    css: [].concat(cssLoaders, ['postcss-loader']),\n\t    less: [].concat(cssLoaders, ['less-loader']),\n\t    scss: [].concat(cssLoaders, ['sass-loader']),\n\t    sass: [].concat(cssLoaders, ['sass-loader'])\n\t}), {\n\t    woff: {\n\t        test: /\\.woff(2)?(\\?.+)?$/,\n\t        loader: \"url-loader\",\n\t        query: \"?limit=10000&mimetype=application/font-woff\"\n\t    },\n\t    tff: {\n\t        test: /\\.ttf(\\?.+)?$/,\n\t        loader: \"url-loader\",\n\t        query: \"?limit=10000&mimetype=application/octet-stream\"\n\t    },\n\t    svg: {\n\t        test: /\\.svg(\\?.+)?$/,\n\t        loader: \"url-loader\",\n\t        query: \"?limit=10000&mimetype=image/svg+xml\"\n\t    },\n\t    png: { test: /\\.png$/, loader: \"url-loader\", query: \"?limit=100000\" },\n\t    eot: { test: /\\.eot(\\?.+)?$/, loader: \"file-loader\" },\n\t    jpg: { test: /\\.jpg$/, loader: \"file-loader\" }\n\t});\n\t\n\tvar defaultLoaderSetMap = {\n\t    'common-asset': ['woff', 'tff', 'eot', 'svg', 'png', 'jpg', 'png', 'eot', 'jpg'],\n\t    'web-asset': ['common-asset', 'json', 'html', 'css'],\n\t    'general-asset': ['web-asset', 'scss', 'less', 'sass', 'scss']\n\t};\n\tfunction buildExpander(loaderSetMap) {\n\t    return function expandLoader(loaders, explicit) {\n\t        loaderSetMap[explicit] ? loaderSetMap[explicit].forEach(function (name) {\n\t            return loaders = expandLoader(loaders, name);\n\t        }) : loaders[explicit + (explicit.endsWith('-loader') ? '' : '-loader')] = true;\n\t        return loaders;\n\t    };\n\t}\n\t\n\tfunction expandExplicitLoaders(explicitLoaders, loaderSetMap) {\n\t    return explicitLoaders.reduce(buildExpander(loaderSetMap), {});\n\t}\n\t\n\tfunction autoLoader() {\n\t    var _ref2 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t    var _ref2$jsonPath = _ref2.jsonPath;\n\t    var jsonPath = _ref2$jsonPath === undefined ? './package.json' : _ref2$jsonPath;\n\t    var _ref2$loaderMap = _ref2.loaderMap;\n\t    var loaderMap = _ref2$loaderMap === undefined ? defaultLoaderMap : _ref2$loaderMap;\n\t    var _ref2$loaderSetMap = _ref2.loaderSetMap;\n\t    var loaderSetMap = _ref2$loaderSetMap === undefined ? defaultLoaderSetMap : _ref2$loaderSetMap;\n\t\n\t    var json = (0, _readJsonSync2.default)(jsonPath);\n\t\n\t    var dependencyPool = Object.assign({}, json.dependencies, json.devDpendencies, expandExplicitLoaders(json.polypacker ? json.polypacker.loaders : [], loaderSetMap));\n\t    return Object.keys(dependencyPool).filter(function (name) {\n\t        return name.endsWith('-loader');\n\t    }).map(function (name) {\n\t        return name.replace(/-loader$/, '');\n\t    }).map(function (name) {\n\t        return loaderMap[name];\n\t    }).filter(function (name) {\n\t        return name;\n\t    });\n\t}\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.autoLoader = exports.default = undefined;\n\t\n\tvar _configBuilder = __webpack_require__(19);\n\t\n\tvar _configBuilder2 = _interopRequireDefault(_configBuilder);\n\t\n\tvar _autoLoader2 = __webpack_require__(8);\n\t\n\tvar _autoLoader3 = _interopRequireDefault(_autoLoader2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = _configBuilder2.default;\n\texports.autoLoader = _autoLoader3.default;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"colors\");\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"webpack-node-externals\");\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\texports.default = parse;\n\t\n\tvar _parserFromArgumentMap = __webpack_require__(13);\n\t\n\tvar _parserFromArgumentMap2 = _interopRequireDefault(_parserFromArgumentMap);\n\t\n\tvar _argumentMap = __webpack_require__(5);\n\t\n\tvar _argumentMap2 = _interopRequireDefault(_argumentMap);\n\t\n\tvar _presets = __webpack_require__(15);\n\t\n\tvar _presets2 = _interopRequireDefault(_presets);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar parser = (0, _parserFromArgumentMap2.default)(_argumentMap2.default);\n\t\n\tfunction parse(argstring) {\n\t    var _parser$parseKnownArg = parser.parseKnownArgs(argstring && argstring.trim().split(/ +/));\n\t\n\t    var _parser$parseKnownArg2 = _slicedToArray(_parser$parseKnownArg, 2);\n\t\n\t    var config = _parser$parseKnownArg2[0];\n\t    var unknown = _parser$parseKnownArg2[1];\n\t\n\t    return {\n\t        config: (0, _presets2.default)(config),\n\t        unknown: unknown\n\t    };\n\t}\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.addArgumentMapToParser = addArgumentMapToParser;\n\texports.default = parserFromArgumentMap;\n\t\n\tvar _argparse = __webpack_require__(22);\n\t\n\tvar _argumentMap = __webpack_require__(5);\n\t\n\tvar _argumentMap2 = _interopRequireDefault(_argumentMap);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction addArgumentMapToParser(parser, argumentMap) {\n\t    for (var key in argumentMap) {\n\t        if (argumentMap.hasOwnProperty(key)) {\n\t            var argAliases = argumentMap[key].aliases || [];\n\t            argAliases.unshift('--' + key);\n\t            parser.addArgument(argAliases, argumentMap[key]);\n\t        }\n\t    }\n\t    return parser;\n\t}\n\t\n\tfunction parserFromArgumentMap(argumentMap) {\n\t    var parser = new _argparse.ArgumentParser({\n\t        argumentDefault: undefined,\n\t        version: '0.0.1',\n\t        addHelp: true,\n\t        description: 'context-driven js distribution tool for multiple environments'\n\t    });\n\t    return addArgumentMapToParser(parser, argumentMap);\n\t}\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.NODE_COMPONENT = NODE_COMPONENT;\n\texports.BROWSER_COMPONENT = BROWSER_COMPONENT;\n\texports.FULLSTACK_COMPONENT = FULLSTACK_COMPONENT;\n\texports.NODE_APPLICATION = NODE_APPLICATION;\n\texports.FULLSTACK_APPLICATION = FULLSTACK_APPLICATION;\n\t\n\tvar _fs = __webpack_require__(3);\n\t\n\tvar _fs2 = _interopRequireDefault(_fs);\n\t\n\tvar _utils = __webpack_require__(7);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction fromSrcDir(args) {\n\t    args.entry = args.entry || './src/index.js';\n\t    args.modules = args.modules || './src';\n\t    return args;\n\t}\n\t\n\tfunction defaultContextualComponent(args) {\n\t    args = fromSrcDir(args);\n\t    args.out = args.out || args.context && './dist/for/' + args.context.toLowerCase() + '_' + args.env.toLowerCase() + '.js';\n\t    return args;\n\t}\n\t\n\tfunction handleIndexTemplate() {\n\t    try {\n\t        _fs2.default.lstatSync('./dist/index.js');\n\t    } catch (err) {\n\t        _fs2.default.mkdir('./dist');\n\t        _fs2.default.createReadStream(__dirname + '/templates/fullstackComponentIndex.js').pipe(_fs2.default.createWriteStream('./dist/index.js'));\n\t    }\n\t}\n\t\n\tfunction NODE_COMPONENT(args) {\n\t    return (0, _utils.taskWrapper)([defaultContextualComponent(args)]);\n\t}\n\t\n\tfunction BROWSER_COMPONENT(args) {\n\t    return (0, _utils.taskWrapper)([defaultContextualComponent(args)]);\n\t}\n\t\n\tfunction FULLSTACK_COMPONENT(args) {\n\t    handleIndexTemplate(); // TODO: this and splitByContext don't handle args.out like they should\n\t    args.contexts = ['NODE', 'BROWSER'];\n\t    args.environments = ['DEVELOPMENT', 'PRODUCTION'];\n\t    var contexts = (0, _utils.splitByContext)(args);\n\t    var compilers = (0, _utils.splitByEnv)(contexts).map(defaultContextualComponent);\n\t    return (0, _utils.taskWrapper)(compilers, args.watch ? 'watch' : 'dist');\n\t}\n\t\n\tfunction NODE_APPLICATION(args) {\n\t    args.context = 'NODE';\n\t    delete args.contexts;\n\t    args.out = args.out || './dist/index.js';\n\t    args.run = true;\n\t    args = defaultContextualComponent(args);\n\t    args = (0, _utils.splitByEnv)(args);\n\t    return (0, _utils.taskWrapper)(args, args.watch ? 'watch-and-run' : 'run');\n\t}\n\t\n\tfunction FULLSTACK_APPLICATION(args) {\n\t    args.contexts = ['NODE', 'BROWSER'];\n\t    var contexts = (0, _utils.splitByContext)(args);\n\t    for (i = 0; i < contexts.length; i++) {\n\t        contexts[i] = defaultContextualComponent(contexts[i]);\n\t        contexts[i].run = contexts[i].context == 'NODE';\n\t    }\n\t    return (0, _utils.taskWrapper)(contexts, args.watch ? 'watch-and-run' : 'run');\n\t}\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = apply;\n\t\n\tvar _presetMap = __webpack_require__(14);\n\t\n\tvar presetMap = _interopRequireWildcard(_presetMap);\n\t\n\tvar _utils = __webpack_require__(7);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction metaArgs(conf) {\n\t    return { logLevel: conf.logLevel };\n\t}\n\t\n\tfunction apply(args) {\n\t    var preset = args.preset;\n\t    delete args.preset;\n\t    if (preset && presetMap[preset]) {\n\t        return presetMap[preset](args);\n\t    } else {\n\t        var contexts = (0, _utils.splitByContext)(args);\n\t        var compilers = (0, _utils.splitByEnv)(contexts);\n\t        return (0, _utils.taskWrapper)(compilers, (0, _utils.selectTask)(args), metaArgs(args));\n\t    }\n\t}\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.logCompilation = exports.parser = exports.run = exports.taskManager = exports.autoLoader = exports.configBuilder = undefined;\n\t\n\tvar _webpacker = __webpack_require__(9);\n\t\n\tObject.defineProperty(exports, 'autoLoader', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _webpacker.autoLoader;\n\t  }\n\t});\n\t\n\tvar _taskManager2 = __webpack_require__(18);\n\t\n\tObject.defineProperty(exports, 'run', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _taskManager2.run;\n\t  }\n\t});\n\t\n\tvar _logging = __webpack_require__(17);\n\t\n\tObject.defineProperty(exports, 'logCompilation', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _logging.logCompilation;\n\t  }\n\t});\n\t\n\tvar _webpacker2 = _interopRequireDefault(_webpacker);\n\t\n\tvar _taskManager3 = _interopRequireDefault(_taskManager2);\n\t\n\tvar _argparser = __webpack_require__(6);\n\t\n\tvar _argparser2 = _interopRequireDefault(_argparser);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.configBuilder = _webpacker2.default;\n\texports.taskManager = _taskManager3.default;\n\texports.parser = _argparser2.default;\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.log = log;\n\texports.pad = pad;\n\texports.shortTimestamp = shortTimestamp;\n\texports.prefix = prefix;\n\texports.importantLog = importantLog;\n\texports.logImportantFromToAction = logImportantFromToAction;\n\texports.logCompilation = logCompilation;\n\t\n\tvar _colors = __webpack_require__(10);\n\t\n\tvar _colors2 = _interopRequireDefault(_colors);\n\t\n\tvar _identity = __webpack_require__(1);\n\t\n\tvar _identity2 = _interopRequireDefault(_identity);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction log(str) {\n\t    console.log(str);\n\t}\n\t\n\tfunction pad(num) {\n\t    return (\"0\" + num).slice(-2);\n\t}\n\t\n\tfunction shortTimestamp() {\n\t    var d = new Date();\n\t    return pad(d.getHours()) + ':' + pad(d.getMinutes()) + '.' + pad(d.getSeconds());\n\t}\n\t\n\tfunction upperFirst(str) {\n\t    return typeof str != \"undefined\" ? (str += '', str[0].toUpperCase() + str.substr(1)) : '';\n\t}\n\t\n\tfunction prefix() {\n\t    var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t    var _ref$color = _ref.color;\n\t    var color = _ref$color === undefined ? 'magenta' : _ref$color;\n\t\n\t    return _colors2.default[color]('[' + shortTimestamp() + '] ') + _colors2.default['bg' + upperFirst(color)](' ');\n\t}\n\t\n\tfunction importantLog(str) {\n\t    var _ref2 = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    var _ref2$color = _ref2.color;\n\t    var color = _ref2$color === undefined ? 'magenta' : _ref2$color;\n\t\n\t    log(prefix({ color: color }) + \" \" + _colors2.default.bold(str));\n\t}\n\t\n\tfunction logImportantFromToAction(acting, _ref3) {\n\t    var _ref3$identity = _ref3[_identity2.default];\n\t    var entry = _ref3$identity.entry;\n\t    var out = _ref3$identity.out;\n\t    var color = arguments.length <= 2 || arguments[2] === undefined ? 'cyan' : arguments[2];\n\t\n\t    importantLog(acting + ' from \\'' + _colors2.default[color](entry) + '\\' to \\'' + _colors2.default[color](out) + '\\'');\n\t}\n\t\n\tfunction logCompilation(err, stats, _ref4) {\n\t    var logLevel = _ref4.logLevel;\n\t    var signature = _ref4.signature;\n\t\n\t    var status = 'success';\n\t    if (err) {\n\t        importantLog(_colors2.default.red('Errors while building ' + signature + '!'), { color: 'red' });\n\t        log('Error', err);\n\t        status = 'error';\n\t    } else if (stats.hasErrors()) {\n\t        importantLog(_colors2.default.red('Errors while building ' + signature + '!'), { color: 'red' });\n\t        log(stats.toString({ colors: true, errorDetails: true }));\n\t        status = 'error';\n\t    } else {\n\t        importantLog('successfully built ' + _colors2.default.cyan(signature));\n\t    }\n\t    if (logLevel == 'VERBOSE') {\n\t        log(stats.toString({ colors: true }));\n\t    }\n\t    return {\n\t        compiler: signature,\n\t        status: status\n\t    };\n\t}\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar runSelectedContext = function () {\n\t    var ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee(configurations, _ref3) {\n\t        var unknown = _ref3.unknown;\n\t        return regeneratorRuntime.wrap(function _callee$(_context) {\n\t            while (1) {\n\t                switch (_context.prev = _context.next) {\n\t                    case 0:\n\t                        configurations.map(function (configuration) {\n\t                            if (configuration.run) {\n\t                                (0, _logging.importantLog)(\"runnning \" + _colors2.default.cyan(configuration.context) + \" context from \" + _colors2.default.cyan(configuration.out));\n\t                                (0, _nodemon2.default)({\n\t                                    execMap: { js: 'node' },\n\t                                    script: _path2.default.join(process.env.PWD, configuration.out),\n\t                                    args: unknown,\n\t                                    ignore: ['*'],\n\t                                    watch: ['nothing/'],\n\t                                    ext: 'noop'\n\t                                }).on('restart', function () {\n\t                                    (0, _logging.importantLog)('Patched!');\n\t                                }).on('quit', function () {\n\t                                    (0, _logging.importantLog)(_colors2.default.cyan(configuration.context) + \" process quit\");\n\t                                });\n\t                            }\n\t                        });\n\t\n\t                    case 1:\n\t                    case 'end':\n\t                        return _context.stop();\n\t                }\n\t            }\n\t        }, _callee, this);\n\t    }));\n\t\n\t    return function runSelectedContext(_x2, _x3) {\n\t        return ref.apply(this, arguments);\n\t    };\n\t}();\n\t\n\texports.run = run;\n\texports.default = runTask;\n\t\n\tvar _colors = __webpack_require__(10);\n\t\n\tvar _colors2 = _interopRequireDefault(_colors);\n\t\n\tvar _webpack = __webpack_require__(2);\n\t\n\tvar _webpack2 = _interopRequireDefault(_webpack);\n\t\n\tvar _path = __webpack_require__(4);\n\t\n\tvar _path2 = _interopRequireDefault(_path);\n\t\n\tvar _nodemon = __webpack_require__(24);\n\t\n\tvar _nodemon2 = _interopRequireDefault(_nodemon);\n\t\n\tvar _death = __webpack_require__(23);\n\t\n\tvar _death2 = _interopRequireDefault(_death);\n\t\n\tvar _webpacker = __webpack_require__(9);\n\t\n\tvar _webpacker2 = _interopRequireDefault(_webpacker);\n\t\n\tvar _argparser = __webpack_require__(6);\n\t\n\tvar _argparser2 = _interopRequireDefault(_argparser);\n\t\n\tvar _identity = __webpack_require__(1);\n\t\n\tvar _identity2 = _interopRequireDefault(_identity);\n\t\n\tvar _logging = __webpack_require__(17);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { return step(\"next\", value); }, function (err) { return step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\t\n\tvar watching = {\n\t    count: 0,\n\t    compilers: []\n\t};\n\t\n\tvar polywatch = Symbol(polywatch);\n\t\n\tfunction endWatch(watcher) {\n\t    watcher.close(function () {\n\t        (0, _logging.logImportantFromToAction)(\"stopped compiling\", watcher, 'magenta');\n\t        watching.count -= 1;\n\t        if (!watching.count) {\n\t            (0, _logging.importantLog)('all watchers stopped. Polypacker exited cleanly');\n\t            process.exit(0);\n\t        }\n\t    });\n\t}\n\t\n\tfunction polypack(configuration) {\n\t    var compiler = (0, _webpack2.default)((0, _webpacker2.default)(configuration));\n\t    compiler[_identity2.default] = configuration[_identity2.default];\n\t    compiler[polywatch] = function () {\n\t        var watcher = compiler.watch.apply(compiler, arguments);\n\t        watching.count += 1;\n\t        watcher[_identity2.default] = configuration[_identity2.default];\n\t        watching.compilers.push(watcher);\n\t        return watcher;\n\t    };\n\t    return compiler;\n\t}\n\t\n\tfunction onBuild(err, stats, _ref) {\n\t    var logLevel = _ref.logLevel;\n\t    var signature = _ref[_identity2.default].signature;\n\t\n\t    return (0, _logging.logCompilation)(err, stats, { logLevel: logLevel, signature: signature });\n\t}\n\t\n\tfunction run(configuration) {\n\t    var callback = arguments.length <= 1 || arguments[1] === undefined ? function (_) {\n\t        return _;\n\t    } : arguments[1];\n\t\n\t    polypack(configuration).run(function (err, stats) {\n\t        results[configuration[_identity2.default].signature] = onBuild(err, stats, configuration);\n\t        callback({ results: results });\n\t    });\n\t}\n\t\n\tfunction compileForAllConfigurations(configurations) {\n\t    var waiting = configurations.length;\n\t    var results = {};\n\t    var rejection = null;\n\t    return new Promise(function (resolve, reject) {\n\t        configurations.map(function (configuration) {\n\t            (0, _logging.logImportantFromToAction)(\"distributing\", configuration);\n\t            polypack(configuration).run(function (err, stats) {\n\t                results[configuration[_identity2.default].signature] = onBuild(err, stats, configuration);\n\t                waiting -= 1;\n\t                if (!waiting) {\n\t                    resolve(results);\n\t                }\n\t            });\n\t        });\n\t        if (!rejection) {\n\t            rejection = setTimeout(function (_) {\n\t                if (waiting) reject(new Error('compiler timed out with the results ' + results));\n\t            }, 100000);\n\t        }\n\t    });\n\t}\n\t\n\tvar contextWatchActions = {\n\t    NODE: function NODE(_ref2) {\n\t        var watch = _ref2.watch;\n\t        var run = _ref2.run;\n\t        return watch && run && _nodemon2.default.restart();\n\t    }\n\t};\n\t\n\tfunction watchAllConfigurations(configurations) {\n\t    var waiting = configurations.length;\n\t    var results = {};\n\t    return new Promise(function (resolve, reject) {\n\t        configurations.map(function (configuration) {\n\t            (0, _logging.logImportantFromToAction)(\"watching and distributing\", configuration);\n\t            polypack(configuration)[polywatch](250, function (err, stats) {\n\t                results[configuration[_identity2.default].signature] = onBuild(err, stats, configuration);\n\t                if (contextWatchActions[configuration.context]) {\n\t                    contextWatchActions[configuration.context](configuration);\n\t                }\n\t                waiting -= 1;\n\t                if (!waiting) {\n\t                    resolve(results);\n\t                }\n\t            });\n\t        });\n\t        setTimeout(function () {\n\t            if (waiting) reject(new Error('compiler timed out with the results ' + results));\n\t        }, 100000);\n\t    });\n\t}\n\t\n\tfunction chain() {\n\t    for (var _len = arguments.length, fns = Array(_len), _key = 0; _key < _len; _key++) {\n\t        fns[_key] = arguments[_key];\n\t    }\n\t\n\t    return function () {\n\t        var ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee2() {\n\t            var _iteratorNormalCompletion,\n\t                _didIteratorError,\n\t                _iteratorError,\n\t                _iterator,\n\t                _step,\n\t                fn,\n\t                _args2 = arguments;\n\t\n\t            return regeneratorRuntime.wrap(function _callee2$(_context2) {\n\t                while (1) {\n\t                    switch (_context2.prev = _context2.next) {\n\t                        case 0:\n\t                            _iteratorNormalCompletion = true;\n\t                            _didIteratorError = false;\n\t                            _iteratorError = undefined;\n\t                            _context2.prev = 3;\n\t                            _iterator = fns[Symbol.iterator]();\n\t\n\t                        case 5:\n\t                            if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n\t                                _context2.next = 12;\n\t                                break;\n\t                            }\n\t\n\t                            fn = _step.value;\n\t                            _context2.next = 9;\n\t                            return fn.apply(undefined, _args2);\n\t\n\t                        case 9:\n\t                            _iteratorNormalCompletion = true;\n\t                            _context2.next = 5;\n\t                            break;\n\t\n\t                        case 12:\n\t                            _context2.next = 18;\n\t                            break;\n\t\n\t                        case 14:\n\t                            _context2.prev = 14;\n\t                            _context2.t0 = _context2['catch'](3);\n\t                            _didIteratorError = true;\n\t                            _iteratorError = _context2.t0;\n\t\n\t                        case 18:\n\t                            _context2.prev = 18;\n\t                            _context2.prev = 19;\n\t\n\t                            if (!_iteratorNormalCompletion && _iterator.return) {\n\t                                _iterator.return();\n\t                            }\n\t\n\t                        case 21:\n\t                            _context2.prev = 21;\n\t\n\t                            if (!_didIteratorError) {\n\t                                _context2.next = 24;\n\t                                break;\n\t                            }\n\t\n\t                            throw _iteratorError;\n\t\n\t                        case 24:\n\t                            return _context2.finish(21);\n\t\n\t                        case 25:\n\t                            return _context2.finish(18);\n\t\n\t                        case 26:\n\t                        case 'end':\n\t                            return _context2.stop();\n\t                    }\n\t                }\n\t            }, _callee2, this, [[3, 14, 18, 26], [19,, 21, 25]]);\n\t        }));\n\t\n\t        return function (_x4) {\n\t            return ref.apply(this, arguments);\n\t        };\n\t    }();\n\t}\n\t\n\tvar tasks = {\n\t    'dist': chain(compileForAllConfigurations, exit),\n\t    'watch': watchAllConfigurations,\n\t    'run': chain(compileForAllConfigurations, runSelectedContext),\n\t    'watch-and-run': chain(watchAllConfigurations, runSelectedContext)\n\t};\n\t\n\tfunction exit() {\n\t    var _ref4 = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t    var err = _ref4.err;\n\t\n\t    if (err) {\n\t        console.log(err);\n\t        throw err;\n\t    }\n\t    if (watching.count) {\n\t        (0, _logging.log)('\\n');\n\t        (0, _logging.importantLog)('stopping watchers.');\n\t        watching.compilers.map(endWatch);\n\t    } else {\n\t        (0, _logging.importantLog)('Polypacker exited cleanly.');\n\t        process.exit(0);\n\t    }\n\t}\n\t\n\tfunction runTask(_ref5) {\n\t    var _ref5$config = _ref5.config;\n\t    var compilers = _ref5$config.compilers;\n\t    var task = _ref5$config.task;\n\t    var unknown = _ref5.unknown;\n\t    var _ref5$callback = _ref5.callback;\n\t    var callback = _ref5$callback === undefined ? function (_) {\n\t        return _;\n\t    } : _ref5$callback;\n\t\n\t    return tasks[task](compilers.map(_identity.sign), { unknown: unknown }).then(callback).catch(function (err) {\n\t        return exit({ err: err });\n\t    });\n\t}\n\t\n\t(0, _death2.default)(function (signal, err) {\n\t    return exit({ err: err });\n\t});\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = webpackConfig;\n\t\n\tvar _fs = __webpack_require__(3);\n\t\n\tvar _fs2 = _interopRequireDefault(_fs);\n\t\n\tvar _path = __webpack_require__(4);\n\t\n\tvar _path2 = _interopRequireDefault(_path);\n\t\n\tvar _webpack = __webpack_require__(2);\n\t\n\tvar _webpack2 = _interopRequireDefault(_webpack);\n\t\n\tvar _modifiers = __webpack_require__(20);\n\t\n\tvar _modifiers2 = _interopRequireDefault(_modifiers);\n\t\n\tvar _identity = __webpack_require__(1);\n\t\n\tvar _identity2 = _interopRequireDefault(_identity);\n\t\n\tvar _subConfigBuilders = __webpack_require__(21);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tvar derivedEnv = process.env.NODE_ENV && process.env.NODE_ENV.toUpperCase() || 'DEVELOPMENT';\n\t\n\tfunction webpackConfig(_ref) {\n\t    var entry = _ref.entry;\n\t    var out = _ref.out;\n\t    var hot = _ref.hot;\n\t    var modules = _ref.modules;\n\t    var context = _ref.context;\n\t    var _ref$env = _ref.env;\n\t    var env = _ref$env === undefined ? derivedEnv : _ref$env;\n\t    var _ref$babelPresets = _ref.babelPresets;\n\t    var babelPresets = _ref$babelPresets === undefined ? [] : _ref$babelPresets;\n\t    var _ref$plugins = _ref.plugins;\n\t    var plugins = _ref$plugins === undefined ? [] : _ref$plugins;\n\t    var polypackMeta = _ref[_identity2.default];\n\t    var _ref$overrides = _ref.overrides;\n\t    var overrides = _ref$overrides === undefined ? {} : _ref$overrides;\n\t\n\t    process.chdir(process.env.PWD);\n\t    var config = Object.assign(polypackMeta ? _defineProperty({}, _identity2.default, polypackMeta) : (0, _identity.sign)({ entry: entry, out: out, hot: hot, context: context, env: env }), (0, _subConfigBuilders.io)({ entry: entry, out: out }), (0, _subConfigBuilders.target)({ context: context }), (0, _subConfigBuilders.fixed)(), (0, _subConfigBuilders.plugin)({ env: env, context: context, plugins: plugins }), (0, _subConfigBuilders.resolve)({ pwd: './', modules: modules, dirname: _path2.default.join(__dirname, '..') }), (0, _subConfigBuilders.module)({ babelPresets: babelPresets }), overrides);\n\t    return (0, _modifiers2.default)({ config: config, env: env, hot: hot });\n\t}\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = modify;\n\t\n\tvar _webpackNodeExternals = __webpack_require__(11);\n\t\n\tvar _webpackNodeExternals2 = _interopRequireDefault(_webpackNodeExternals);\n\t\n\tvar _webpack = __webpack_require__(2);\n\t\n\tvar _webpack2 = _interopRequireDefault(_webpack);\n\t\n\tvar _identity = __webpack_require__(1);\n\t\n\tvar _identity2 = _interopRequireDefault(_identity);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar modifiers = {\n\t    polypack: function polypack(config) {\n\t        var compound_version = config[_identity2.default].signature;\n\t        config.externals.push(function (context, request, callback) {\n\t            if (/^polypack!/.test(request)) {\n\t                return callback(null, request.substr(9) + '/dist/for/' + compound_version);\n\t            }\n\t            callback();\n\t        });\n\t        config.callbackLoader = {\n\t            polypack: function polypack(mod) {\n\t                return mod ? 'require(\"' + mod + '/dist/for/' + compound_version + '\") //polypacked by dist' : 'require(\"./for/' + compound_version + '\") //polypacked by dist';\n\t            }\n\t        };\n\t        return config;\n\t    },\n\t    hot: function hot(config) {\n\t        config.debug = true;\n\t        config.plugins.unshift(new _webpack2.default.HotModuleReplacementPlugin());\n\t        config.externals = [(0, _webpackNodeExternals2.default)({ whitelist: [\"webpack/hot/poll?1000\"] })];\n\t        config.entry.unshift(\"webpack/hot/poll?1000\");\n\t        return config;\n\t    },\n\t    production: function production(config) {\n\t        config.plugins.push(new _webpack2.default.optimize.UglifyJsPlugin());\n\t        return config;\n\t    }\n\t};\n\t\n\tfunction modify(_ref) {\n\t    var config = _ref.config;\n\t    var env = _ref.env;\n\t    var hot = _ref.hot;\n\t\n\t    config = modifiers.polypack(config);\n\t    if (env.toLowerCase() == 'production') config = modifiers.production(config);\n\t    if (hot) config = modifiers.hot(config);\n\t    return config;\n\t}\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.module = undefined;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.plugin = plugin;\n\texports.target = target;\n\texports.output = output;\n\texports.fixed = fixed;\n\texports.resolve = resolve;\n\texports.output = output;\n\texports.io = io;\n\t\n\tvar _fs = __webpack_require__(3);\n\t\n\tvar _fs2 = _interopRequireDefault(_fs);\n\t\n\tvar _path = __webpack_require__(4);\n\t\n\tvar _path2 = _interopRequireDefault(_path);\n\t\n\tvar _webpack = __webpack_require__(2);\n\t\n\tvar _webpack2 = _interopRequireDefault(_webpack);\n\t\n\tvar _webpackNodeExternals = __webpack_require__(11);\n\t\n\tvar _webpackNodeExternals2 = _interopRequireDefault(_webpackNodeExternals);\n\t\n\tvar _autoLoader = __webpack_require__(8);\n\t\n\tvar _autoLoader2 = _interopRequireDefault(_autoLoader);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction babelLoader(_ref) {\n\t    var babelPresets = _ref.babelPresets;\n\t\n\t    babelPresets.unshift('es2015');\n\t    babelPresets.push('stage-0');\n\t    return {\n\t        test: /\\.js|\\.jsx$/,\n\t        loader: 'babel',\n\t        query: {\n\t            presets: babelPresets.map(function (preset) {\n\t                return 'babel-preset-' + preset;\n\t            })\n\t        },\n\t        exclude: /node_modules/,\n\t        noParse: /\\.min\\.js/\n\t    };\n\t}\n\t\n\tfunction plugin(_ref2) {\n\t    var env = _ref2.env;\n\t    var context = _ref2.context;\n\t    var plugins = _ref2.plugins;\n\t\n\t    return {\n\t        plugins: [new _webpack2.default.DefinePlugin({\n\t            $ES: {\n\t                CONTEXT: JSON.stringify(context || 'NODE'),\n\t                ENV: JSON.stringify(env)\n\t            }\n\t        }), new _webpack2.default.BannerPlugin('require(\"source-map-support\").install();', { raw: true, entryOnly: false })].concat(_toConsumableArray(plugins), [new _webpack2.default.optimize.DedupePlugin(), new _webpack2.default.optimize.OccurenceOrderPlugin(), new _webpack2.default.NoErrorsPlugin()]) };\n\t}\n\t\n\tfunction target(_ref3) {\n\t    var context = _ref3.context;\n\t\n\t    return {\n\t        target: {\n\t            NODE: 'node',\n\t            BROWSER: 'web'\n\t        }[context]\n\t    };\n\t}\n\t\n\tfunction output(out) {\n\t    return {\n\t        libraryTarget: \"commonjs2\",\n\t        path: _path2.default.dirname(out),\n\t        filename: _path2.default.basename(out)\n\t    };\n\t}\n\t\n\tfunction fixed() {\n\t    return {\n\t        devtool: 'source-map',\n\t        cache: false,\n\t        node: {\n\t            __dirname: false,\n\t            __filename: false\n\t        },\n\t        externals: [(0, _webpackNodeExternals2.default)()]\n\t    };\n\t}\n\t\n\tfunction resolve(_ref4) {\n\t    var pwd = _ref4.pwd;\n\t    var modules = _ref4.modules;\n\t    var dirname = _ref4.dirname;\n\t\n\t    var fallback = [_path2.default.join(dirname, \"node_modules\"), _path2.default.join(_path2.default.resolve(pwd), \"node_modules\"), _path2.default.join(_path2.default.resolve(pwd), \"node_modules/polypacker/node_modules\")];\n\t    return {\n\t        context: _path2.default.resolve(pwd),\n\t        resolve: {\n\t            moduleDirectories: [modules, \"node_modules\", \"node_modules/polypacker/node_modules\"],\n\t            extensions: ['', '.json', '.js', '.jsx'],\n\t            fallback: fallback\n\t        },\n\t        resolveLoader: {\n\t            moduleDirectories: [\"node_modules\", \"node_modules/polypacker/node_modules\"],\n\t            fallback: fallback,\n\t            alias: { polypack: 'callback?polypack' }\n\t        }\n\t    };\n\t}\n\t\n\tfunction output(_ref5) {\n\t    var out = _ref5.out;\n\t\n\t    return {\n\t        output: {\n\t            libraryTarget: \"commonjs2\",\n\t            path: _path2.default.dirname(out),\n\t            filename: _path2.default.basename(out)\n\t        }\n\t    };\n\t}\n\t\n\tfunction io(_ref6) {\n\t    var entry = _ref6.entry;\n\t    var out = _ref6.out;\n\t\n\t    return _extends({ entry: [entry] }, output({ out: out }));\n\t}\n\t\n\tfunction _module(_ref7) {\n\t    var babelPresets = _ref7.babelPresets;\n\t    var _ref7$packagePath = _ref7.packagePath;\n\t    var packagePath = _ref7$packagePath === undefined ? './package.json' : _ref7$packagePath;\n\t\n\t    return {\n\t        module: {\n\t            loaders: [babelLoader({ babelPresets: babelPresets })].concat(_toConsumableArray((0, _autoLoader2.default)({ jsonPath: _path2.default.resolve(packagePath) })))\n\t        }\n\t    };\n\t}\n\texports.module = _module;\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"argparse\");\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"death\");\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"nodemon\");\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"read-json-sync\");\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** index.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 7214f58df357e4b98f61\n **/","const identity = Symbol('polypacker')\n\nconst derivedEnv = process.env.NODE_ENV && process.env.NODE_ENV.toUpperCase() || 'DEVELOPMENT'\n\nfunction compound({context, env}){\n    return (context && env) ? context.toLowerCase() + '_' + env.toLowerCase() : 'index'\n}\n\nexport function sign(obj = {}){\n    let { entry, out, hot, context, env = derivedEnv } = obj\n    obj[identity] = {\n        signature: compound({context, env}),\n        entry, out, hot\n    }\n    return obj\n}\n\nexport default identity\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/identity.js\n **/","module.exports = require(\"webpack\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"webpack\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 4\n ** module chunks = 0\n **/","let attrHelp = 'There can be multiple (each a seperate argument), and they will contribute to the cross product of compilers'\nconst argumentMap = {\n    entry: {\n        help: 'main entry point for your program, across all contexts'\n    },\n    out: {\n        help: 'destination for compiled bundle'\n    },\n    modules: {\n        help: 'where to look for modules'\n    },\n    watch: {\n        help: 'monitor source files for changes and recompile.',\n        action: 'storeTrue'\n    },\n    hot: {\n        help: 'enable hot module replacement',\n        action: 'storeTrue'\n    },\n    run: {\n        help: 'Which context to run on compilation, if any'\n    },\n    env: {\n        aliases: ['-e', '--environment'],\n        dest: 'environments',\n        help: 'an application lifecycle environment {DEVELOPMENT, PRODUCTION, etc} this distribution will run in. ' + attrHelp ,\n        action: 'append'\n    },\n    context: {\n        aliases: ['-c'],\n        dest: 'contexts',\n        help: 'a context {NODE, BROWSER, etc} this distribution will run in. ' + attrHelp ,\n        action: 'append'\n    },\n    preset: {\n        help: '\\\n            reference to a preset build configuration. For instance, FULLSTACK_COMPONENT references {\\\n            entry: ./src/entry.js\\\n            contexts: [NODE, BROWSER]\\\n            environments: [DEVELOPMENT, PRODUCTION]\\\n            out: ./dist/for/$context_$env.js\\\n        }. Presets are actually functions that take in the given user args, and thus can have fairly intricate logic.',\n    },\n    babelPreset: {\n        dest: 'babelPresets',\n        defaultValue: [],\n        help: 'add a preset to the babel loader, between es2015 and stage-0',\n        action: 'append'\n    },\n    logLevel: {\n        defaultValue: 'ERROR',\n        help: 'VERBOSE will output webpack stats and warnings'\n    }\n}\nexport default argumentMap\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/argparser/argumentMap.js\n **/","\nexport function clone(obj) {\n    if (null == obj || \"object\" != typeof obj) return obj;\n    var copy = obj.constructor() || {}\n    for (var attr in obj) {\n        if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];\n    }\n    return copy;\n}\n\nexport function selectTask({watch, run}){\n    if(watch && run){\n        return 'watch-and-run'\n    } else if(watch){\n        return 'watch'\n    } else if (run) {\n        return 'run'\n    } else {\n        return 'dist'\n    }\n}\n\nexport function taskWrapper(compilers, task, meta){\n    return {\n        task: task || 'dist', \n        compilers: compilers,\n        meta: meta || {logLevel: compilers[0].logLevel || 'ERROR'}, \n    }\n}\n\nexport function flatten(arrays){\n    return [].concat.apply([], arrays);\n}\n\n\nexport function splitByContext(args){\n    if(Array.isArray(args)){\n        return flatten(args.map(splitByContext))\n    }\n    var contexts = args.contexts\n    delete args.contexts\n    return contexts ? contexts.map(function(context){\n        var contextArgs = clone(args)\n        contextArgs.context = context\n        return contextArgs\n    }) : [args]\n}\n\nexport function splitByEnv(args){\n    if(Array.isArray(args)){\n        return flatten(args.map(splitByEnv))\n    }\n    var envs = args.environments\n    delete args.environments\n    return envs ? envs.map(function(env){\n        var envArgs = clone(args)\n        envArgs.env = env\n        return envArgs\n    }) : [args]\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/argparser/utils.js\n **/","import readJsonSync from 'read-json-sync'\n\nfunction simpleTemplate({name, ...data}){\n    return {\n        test: new RegExp(`\\.${name}$`,'g'), ...data\n    }\n}\n\nfunction expandLoaderData(data){\n    return (typeof(data) == 'string') ?\n        {loader: data} :\n        Array.isArray(data) ?\n            {loaders: data} :\n            data\n}\n\nexport function expandSimpleLoaderMap(map){\n    return Object.keys(map).reduce((newMap, name) => {\n        let data = map[name]\n        newMap[name] = simpleTemplate({name, ...expandLoaderData(map[name])})\n        return newMap\n    }, {})\n}\n\nconst cssLoaders = [ 'style-loader', 'css-loader' ]\nconst defaultLoaderMap = Object.assign(\n    expandSimpleLoaderMap({\n        json: 'json-loader',\n        html: 'html-loader',\n        css:  [ ...cssLoaders, 'postcss-loader'],\n        less: [ ...cssLoaders, 'less-loader'   ],\n        scss: [ ...cssLoaders, 'sass-loader'   ],\n        sass: [ ...cssLoaders, 'sass-loader'   ] \n    }), {\n        woff: {\n            test: /\\.woff(2)?(\\?.+)?$/,\n            loader: \"url-loader\",\n            query: \"?limit=10000&mimetype=application/font-woff\"\n        },\n        tff: {\n            test: /\\.ttf(\\?.+)?$/,\n            loader: \"url-loader\",\n            query: \"?limit=10000&mimetype=application/octet-stream\"\n        },\n        svg: {\n            test: /\\.svg(\\?.+)?$/,\n            loader: \"url-loader\",\n            query:\"?limit=10000&mimetype=image/svg+xml\"\n        },\n        png: { test: /\\.png$/, loader: \"url-loader\", query: \"?limit=100000\" },\n        eot: { test: /\\.eot(\\?.+)?$/, loader: \"file-loader\" },\n        jpg: { test: /\\.jpg$/, loader: \"file-loader\" }\n    }\n)\n\nconst defaultLoaderSetMap = {\n    'common-asset': ['woff', 'tff', 'eot', 'svg', 'png', 'jpg', 'png', 'eot', 'jpg'],\n    'web-asset': ['common-asset', 'json', 'html', 'css'],\n    'general-asset': ['web-asset', 'scss','less', 'sass', 'scss']\n}\nfunction buildExpander(loaderSetMap){\n    return function expandLoader(loaders, explicit){\n        loaderSetMap[explicit] ?\n            loaderSetMap[explicit].forEach(name => loaders = expandLoader(loaders, name)) :\n            loaders[explicit + (explicit.endsWith('-loader') ? '' : '-loader')] = true\n        return loaders\n    }\n}\n\nfunction expandExplicitLoaders(explicitLoaders, loaderSetMap){\n    return explicitLoaders.reduce(buildExpander(loaderSetMap), {})\n}\n\nexport default function autoLoader({\n    jsonPath = './package.json',\n    loaderMap = defaultLoaderMap,\n    loaderSetMap = defaultLoaderSetMap,\n} = {}){\n    let json = readJsonSync(jsonPath)\n\n    let dependencyPool = Object.assign({}, json.dependencies, json.devDpendencies,\n        expandExplicitLoaders(json.polypacker ? json.polypacker.loaders : [], loaderSetMap))\n    return Object.keys(dependencyPool)\n        .filter(name => name.endsWith('-loader'))\n        .map(name => name.replace(/-loader$/,''))\n        .map(name => loaderMap[name])\n        .filter(name => name)\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/webpacker/autoLoader.js\n **/","export default from './configBuilder'\nexport autoLoader from './autoLoader'\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/webpacker/index.js\n **/","module.exports = require(\"colors\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"colors\"\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = require(\"webpack-node-externals\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"webpack-node-externals\"\n ** module id = 11\n ** module chunks = 0\n **/","import parserFromArgumentMap from './parserFromArgumentMap'\nimport argumentMap from './argumentMap'\nimport applyPreset from './presets'\n\nconst parser = parserFromArgumentMap(argumentMap)\n\nexport default function parse(argstring){\n    let [config, unknown] = parser.parseKnownArgs(argstring && argstring.trim().split(/ +/))\n    return {\n        config: applyPreset(config),\n        unknown\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/argparser/parser.js\n **/","import { ArgumentParser } from 'argparse'\nimport argumentMap from './argumentMap'\n\nexport function addArgumentMapToParser(parser, argumentMap){\n    for (var key in argumentMap) {\n        if (argumentMap.hasOwnProperty(key)) {\n            var argAliases = argumentMap[key].aliases || []\n            argAliases.unshift('--' + key)\n            parser.addArgument(argAliases, argumentMap[key])\n        }\n    }\n    return parser\n}\n\nexport default function parserFromArgumentMap(argumentMap){\n    var parser = new ArgumentParser({\n        argumentDefault: undefined,\n        version: '0.0.1',\n        addHelp: true,\n        description: 'context-driven js distribution tool for multiple environments'\n    })\n    return addArgumentMapToParser(parser, argumentMap)\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/argparser/parserFromArgumentMap.js\n **/","import fs from 'fs'\nimport { taskWrapper, splitByContext, splitByEnv } from './utils'\n\nfunction fromSrcDir(args){\n    args.entry = args.entry || './src/index.js'\n    args.modules = args.modules || './src'\n    return args\n}\n\nfunction defaultContextualComponent(args){\n    args = fromSrcDir(args)\n    args.out = args.out || args.context &&\n        './dist/for/' + args.context.toLowerCase() + '_' + args.env.toLowerCase() + '.js'\n    return args\n}\n\nfunction handleIndexTemplate(){\n    try {\n        fs.lstatSync('./dist/index.js')\n    } catch(err){\n        fs.mkdir('./dist')\n        fs.createReadStream(__dirname + '/templates/fullstackComponentIndex.js')\n            .pipe(fs.createWriteStream('./dist/index.js'))\n    }\n}\n\nexport function NODE_COMPONENT(args){\n    return taskWrapper([defaultContextualComponent(args)])\n}\n\nexport function BROWSER_COMPONENT(args){\n    return taskWrapper([defaultContextualComponent(args)])\n}\n\nexport function FULLSTACK_COMPONENT(args){\n    handleIndexTemplate() // TODO: this and splitByContext don't handle args.out like they should\n    args.contexts = ['NODE', 'BROWSER']\n    args.environments = ['DEVELOPMENT', 'PRODUCTION']\n    var contexts = splitByContext(args)\n    var compilers = splitByEnv(contexts).map(defaultContextualComponent)\n    return taskWrapper(compilers, args.watch ? 'watch' : 'dist')\n}\n\nexport function NODE_APPLICATION(args){\n    args.context = 'NODE'\n    delete args.contexts\n    args.out = args.out || './dist/index.js'\n    args.run = true\n    args = defaultContextualComponent(args)\n    args = splitByEnv(args)\n    return taskWrapper(args, args.watch ? 'watch-and-run' : 'run')\n}\n\nexport function FULLSTACK_APPLICATION(args){\n    args.contexts = ['NODE', 'BROWSER']\n    var contexts = splitByContext(args)\n    for (i = 0; i < contexts.length; i++) {\n        contexts[i] = defaultContextualComponent(contexts[i])\n        contexts[i].run = ( contexts[i].context == 'NODE' )\n    }\n    return taskWrapper(contexts, args.watch ? 'watch-and-run' : 'run')\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/argparser/presetMap.js\n **/","import * as presetMap from './presetMap'\nimport { clone, taskWrapper, selectTask, splitByContext, splitByEnv} from './utils'\n\nfunction metaArgs(conf){\n    return {logLevel: conf.logLevel}\n}\n\nexport default function apply(args){\n    var preset = args.preset\n    delete args.preset\n    if (preset && presetMap[preset]) {\n        return presetMap[preset](args)\n    } else {\n        var contexts = splitByContext(args)\n        var compilers = splitByEnv(contexts)\n        return taskWrapper(compilers, selectTask(args), metaArgs(args))\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/argparser/presets.js\n **/","export configBuilder, { autoLoader } from './webpacker'\nexport taskManager, { run } from './taskManager'\nexport parser from './argparser'\nexport { logCompilation } from './logging'\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import colors from 'colors'\nimport identity from './identity'\n\nexport function log(str){\n    console.log(str)\n}\n\nexport function pad(num){\n    return (\"0\"+num).slice(-2);\n}\n\nexport function shortTimestamp(){\n    var d = new Date()\n    return pad(d.getHours()) + ':' + pad(d.getMinutes()) + '.' + pad(d.getSeconds())\n}\n\nfunction upperFirst (str) {\n    return typeof str !=\"undefined\"  ? (str += '', str[0].toUpperCase() + str.substr(1)) : '' ;\n}\n\nexport function prefix({color = 'magenta'} = {}){\n    return colors[color]('[' + shortTimestamp() + '] ') + colors[`bg${upperFirst(color)}`](' ') \n}\n\nexport function importantLog(str, {color = 'magenta'} = {}){\n  log( prefix({color}) + \" \" + colors.bold(str))\n}\n\nexport function logImportantFromToAction(acting, {[identity]: {entry, out}}, color='cyan'){\n    importantLog(`${acting} from '${colors[color](entry)}' to '${colors[color](out)}'`)\n}\n\nexport function logCompilation(err, stats, {logLevel, signature}) {\n    var status = 'success'\n    if(err) {\n      importantLog(colors.red(`Errors while building ${signature}!`), {color: 'red'})\n      log('Error', err);\n      status = 'error'\n    } else if(stats.hasErrors()) {\n      importantLog(colors.red(`Errors while building ${signature}!`), {color: 'red'})\n      log(stats.toString({colors: true, errorDetails: true}));\n      status = 'error'\n    } else {\n        importantLog('successfully built ' + colors.cyan(signature))\n    }\n    if(logLevel == 'VERBOSE') {\n      log(stats.toString({colors: true}));\n    }\n    return {\n        compiler: signature,\n        status\n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/logging.js\n **/","import colors from 'colors'\nimport webpack from 'webpack'\nimport path from 'path'\nimport nodemon from 'nodemon'\nimport ON_DEATH from 'death'\n\nimport webpackConfig from './webpacker'\nimport configure from './argparser'\nimport identity, { sign } from './identity'\n\nimport { log, importantLog, logImportantFromToAction, logCompilation } from './logging'\n\nvar watching = {\n    count: 0,\n    compilers: []\n}\n\nconst polywatch = Symbol(polywatch)\n\nfunction endWatch(watcher) {\n    watcher.close(function(){\n        logImportantFromToAction(\"stopped compiling\", watcher, 'magenta')\n        watching.count -= 1\n        if(!watching.count){\n            importantLog('all watchers stopped. Polypacker exited cleanly')\n            process.exit(0)\n        }\n    })\n}\n\nfunction polypack(configuration){\n    let compiler = webpack(webpackConfig(configuration))\n    compiler[identity] = configuration[identity]\n    compiler[polywatch] = (...args) => {\n        let watcher = compiler.watch(...args)\n        watching.count += 1\n        watcher[identity] = configuration[identity]\n        watching.compilers.push(watcher)\n        return watcher\n    }\n    return compiler\n}\n\nfunction onBuild(err, stats, {logLevel, [identity]: {signature}}) {\n    return logCompilation(err, stats, {logLevel, signature})\n}\n\nexport function run(configuration, callback=_=>_){\n    polypack(configuration).run((err, stats) => {\n        results[configuration[identity].signature] = onBuild(err, stats, configuration)\n        callback({results})\n    })\n} \n\nfunction compileForAllConfigurations(configurations){\n    let waiting = configurations.length\n    let results = {}\n    let rejection = null\n    return new Promise((resolve, reject) => {\n        configurations.map(configuration => {\n            logImportantFromToAction(\"distributing\", configuration)\n            polypack(configuration).run((err, stats) => {\n                results[configuration[identity].signature] = onBuild(err, stats, configuration)\n                waiting -= 1\n                if(!waiting){\n                    resolve(results)\n                }\n            })\n        })\n        if(!rejection){\n            rejection = setTimeout(_ => {\n                if(waiting)\n                    reject(new Error(`compiler timed out with the results ${results}`))\n            }, 100000)\n        }\n    })\n}\n\nvar contextWatchActions = {\n    NODE: ({watch, run}) => watch && run && nodemon.restart()\n}\n\nfunction watchAllConfigurations(configurations){\n    let waiting = configurations.length\n    let results = {}\n    return new Promise((resolve, reject) => {\n        configurations.map(configuration => {\n            logImportantFromToAction(\"watching and distributing\", configuration)\n            polypack(configuration)[polywatch](250, (err, stats) => {\n                results[configuration[identity].signature] = onBuild(err, stats, configuration)\n                if(contextWatchActions[configuration.context]){\n                    contextWatchActions[configuration.context](configuration)\n                }\n                waiting -= 1\n                if(!waiting){\n                    resolve(results)\n                }\n            })\n        })\n        setTimeout(() => {\n            if(waiting)\n                reject(new Error(`compiler timed out with the results ${results}`))\n        }, 100000)\n    })\n}\n\nasync function runSelectedContext(configurations, {unknown}){\n  configurations.map(configuration => {\n      if(configuration.run){\n          importantLog(\"runnning \" + colors.cyan(configuration.context) + \" context from \" +  colors.cyan(configuration.out))\n          nodemon({\n              execMap: { js: 'node' },\n              script: path.join(process.env.PWD, configuration.out),\n              args: unknown,\n              ignore: ['*'],\n              watch: ['nothing/'],\n              ext: 'noop'\n          }).on('restart', () => {\n              importantLog('Patched!')\n          }).on('quit', () => {\n              importantLog(colors.cyan(configuration.context) + \" process quit\") \n          })\n      }\n  })\n}\n\nfunction chain(...fns){\n    return async function(...args) {\n        for (let fn of fns){\n            await fn(...args)\n        }\n    }\n}\n\nconst tasks = {\n    'dist': chain(compileForAllConfigurations, exit),\n    'watch': watchAllConfigurations,\n    'run': chain(compileForAllConfigurations, runSelectedContext),\n    'watch-and-run': chain(watchAllConfigurations, runSelectedContext)\n}\n\nfunction exit({err} = {}){\n    if(err){\n        console.log(err)\n        throw err\n    }\n    if(watching.count){\n        log('\\n')\n        importantLog('stopping watchers.')\n        watching.compilers.map(endWatch)\n    } else {\n        importantLog('Polypacker exited cleanly.')\n        process.exit(0)\n    }\n}\n\nexport default function runTask({config: {compilers, task}, unknown, callback = _=>_}){\n    return tasks[task](compilers.map(sign), {unknown}).then(callback).catch(err => exit({err}))\n}\n\nON_DEATH((signal, err) => exit({err}))\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/taskManager.js\n **/","import fs from 'fs'\nimport path from 'path'\nimport webpack from 'webpack'\nimport modify from './modifiers'\nimport identity, { sign } from '../identity'\nimport { io, plugin, resolve, fixed, target, module } from './subConfigBuilders'\n\nconst derivedEnv = process.env.NODE_ENV && process.env.NODE_ENV.toUpperCase() || 'DEVELOPMENT'\n\nexport default function webpackConfig({\n    entry, out, hot, modules, context,\n    env=derivedEnv,\n    babelPresets=[],\n    plugins=[],\n    [identity]: polypackMeta,\n    overrides = {}\n}){\n    process.chdir(process.env.PWD)\n    let config = Object.assign(\n        polypackMeta ? {[identity]: polypackMeta} : sign({entry, out, hot, context, env}),\n        io({entry, out}),\n        target({context}),\n        fixed(),\n        plugin({env, context, plugins}),\n        resolve({pwd: './', modules, dirname: path.join(__dirname, '..')}),\n        module({babelPresets}),\n        overrides\n    )\n    return modify({config, env, hot})\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/webpacker/configBuilder.js\n **/","import nodeExternals from 'webpack-node-externals'\nimport webpack from 'webpack'\n\nimport polyPackerIdentity from '../identity'\n\nconst modifiers = {\n    polypack: config => {\n        let compound_version = config[polyPackerIdentity].signature\n        config.externals.push(\n            (context, request, callback) => {\n                if(/^polypack!/.test(request)){\n                    return callback(null, `${request.substr(9)}/dist/for/${compound_version}`)\n                }\n                callback();\n            }\n        )\n        config.callbackLoader = {\n            polypack: (mod) => mod ?\n                `require(\"${mod}/dist/for/${compound_version}\") //polypacked by dist` :\n                `require(\"./for/${compound_version}\") //polypacked by dist`\n        }\n        return config\n    },\n    hot: config => {\n        config.debug = true\n        config.plugins.unshift(new webpack.HotModuleReplacementPlugin())\n        config.externals = [nodeExternals({ whitelist: [\"webpack/hot/poll?1000\"] })]\n        config.entry.unshift(\"webpack/hot/poll?1000\")\n        return config\n    },\n    production: config => {\n        config.plugins.push( new webpack.optimize.UglifyJsPlugin() )\n        return config\n    }\n}\n\nexport default function modify({config, env, hot}){\n    config = modifiers.polypack(config)\n    if(env.toLowerCase() == 'production')\n        config = modifiers.production(config);\n    if(hot)\n        config = modifiers.hot(config);\n    return config\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/webpacker/modifiers.js\n **/","import fs from 'fs'\nimport path from 'path'\nimport webpack from 'webpack'\nimport nodeExternals from 'webpack-node-externals'\nimport autoLoader from './autoLoader'\n\nfunction babelLoader({babelPresets}){\n    babelPresets.unshift('es2015')\n    babelPresets.push('stage-0')\n    return {\n        test: /\\.js|\\.jsx$/,\n        loader: 'babel',\n        query: {\n            presets: babelPresets.map(preset => `babel-preset-${preset}`)\n        },\n        exclude: /node_modules/,\n        noParse: /\\.min\\.js/\n    }\n}\n\nexport function plugin({env, context, plugins}){\n    return {\n        plugins: [\n        new webpack.DefinePlugin({\n            $ES: {\n                CONTEXT: JSON.stringify(context || 'NODE'),\n                ENV: JSON.stringify(env)\n            }\n        }),\n        new webpack.BannerPlugin(\n            'require(\"source-map-support\").install();',\n            { raw: true, entryOnly: false }\n        ),\n        ...plugins,\n        new webpack.optimize.DedupePlugin(),\n        new webpack.optimize.OccurenceOrderPlugin(),\n        new webpack.NoErrorsPlugin(),\n    ]}\n}\n\nexport function target({context}){\n    return {\n        target: ({\n            NODE: 'node',\n            BROWSER: 'web'\n        })[context]\n    }\n}\n\nexport function output(out){\n    return {\n        libraryTarget: \"commonjs2\",\n        path: path.dirname(out),\n        filename: path.basename(out),\n    }\n}\n\nexport function fixed() {\n    return {\n        devtool: 'source-map',\n        cache: false,\n        node: {\n            __dirname: false,\n            __filename: false\n        },\n        externals: [ nodeExternals() ]\n    }\n}\n\nexport function resolve({pwd, modules, dirname}) {\n    let fallback = [\n        path.join(dirname, \"node_modules\"),\n        path.join(path.resolve(pwd), \"node_modules\"),\n        path.join(path.resolve(pwd), \"node_modules/polypacker/node_modules\")\n    ]\n    return {\n        context: path.resolve(pwd),\n        resolve: {\n            moduleDirectories: [modules, \"node_modules\", \"node_modules/polypacker/node_modules\"],\n            extensions: ['', '.json', '.js', '.jsx'],\n            fallback\n        },\n        resolveLoader: {\n            moduleDirectories: [\"node_modules\", \"node_modules/polypacker/node_modules\"],\n            fallback,\n            alias: { polypack: 'callback?polypack' }\n        },\n    }\n}\n\nexport function output({out}){\n    return {\n        output:  {\n            libraryTarget: \"commonjs2\",\n            path: path.dirname(out),\n            filename: path.basename(out),\n        }\n    }\n}\n\nexport function io({entry, out}){\n    return {entry: [ entry ], ...output({out})}\n}\n\nexport function module({babelPresets, packagePath = './package.json'}){\n    return {\n        module: {\n            loaders: [\n                babelLoader({babelPresets}), \n                ...autoLoader({jsonPath: path.resolve(packagePath)}),\n            ]\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/webpacker/subConfigBuilders.js\n **/","module.exports = require(\"argparse\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"argparse\"\n ** module id = 22\n ** module chunks = 0\n **/","module.exports = require(\"death\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"death\"\n ** module id = 23\n ** module chunks = 0\n **/","module.exports = require(\"nodemon\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"nodemon\"\n ** module id = 24\n ** module chunks = 0\n **/","module.exports = require(\"read-json-sync\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"read-json-sync\"\n ** module id = 25\n ** module chunks = 0\n **/"],"sourceRoot":""}